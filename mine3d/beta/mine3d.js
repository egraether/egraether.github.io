window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1E3/60)}}());glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;
var vec3={create:function(a){var b=new glMatrixArrayType(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},add:function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,
b,c){if(!c||a==c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],g=a[2],l=Math.sqrt(c*c+d*d+g*g);if(!l)return b[0]=0,b[1]=0,b[2]=0,b;if(1==l)return b[0]=c,b[1]=d,b[2]=g,b;l=1/l;b[0]=c*l;b[1]=d*l;b[2]=g*l;return b},cross:function(a,b,c){c||(c=a);var d=a[0],g=a[1];a=a[2];var l=b[0],h=b[1];b=b[2];c[0]=g*b-a*h;c[1]=a*l-d*b;c[2]=d*h-g*l;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},
dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],g=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+g*g+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=g*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"}},mat3={create:function(a){var b=new glMatrixArrayType(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a==b){var c=a[1],d=a[2],g=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=g;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,
b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},mat4={create:function(a){var b=new glMatrixArrayType(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],
b[14]=a[14],b[15]=a[15]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a==b){var c=a[1],d=a[2],g=a[3],l=a[6],h=a[7],m=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=
c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=l;a[11]=a[14];a[12]=g;a[13]=h;a[14]=m;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],g=a[3],l=a[4],h=a[5],m=a[6],q=a[7],r=a[8],u=a[9],x=a[10],A=a[11],B=a[12],t=a[13],y=a[14];a=a[15];return B*u*m*g-r*t*m*g-B*h*x*g+l*t*x*g+r*h*y*g-l*u*y*g-B*u*d*q+r*t*d*q+B*c*x*q-b*t*x*q-r*c*
y*q+b*u*y*q+B*h*d*A-l*t*d*A-B*c*m*A+b*t*m*A+l*c*y*A-b*h*y*A-r*h*d*a+l*u*d*a+r*c*m*a-b*u*m*a-l*c*x*a+b*h*x*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],g=a[2],l=a[3],h=a[4],m=a[5],q=a[6],r=a[7],u=a[8],x=a[9],A=a[10],B=a[11],t=a[12],y=a[13],F=a[14],L=a[15],J=c*m-d*h,K=c*q-g*h,I=c*r-l*h,v=d*q-g*m,E=d*r-l*m,H=g*r-l*q,D=u*y-x*t,M=u*F-A*t,N=u*L-B*t,S=x*F-A*y,R=x*L-B*y,w=A*L-B*F,P=1/(J*w-K*R+I*S+v*N-E*M+H*D);b[0]=(m*w-q*R+r*S)*P;b[1]=(-d*w+g*R-l*S)*P;b[2]=(y*H-F*E+L*v)*P;b[3]=(-x*H+A*E-B*v)*P;b[4]=
(-h*w+q*N-r*M)*P;b[5]=(c*w-g*N+l*M)*P;b[6]=(-t*H+F*I-L*K)*P;b[7]=(u*H-A*I+B*K)*P;b[8]=(h*R-m*N+r*D)*P;b[9]=(-c*R+d*N-l*D)*P;b[10]=(t*E-y*I+L*J)*P;b[11]=(-u*E+x*I-B*J)*P;b[12]=(-h*S+m*M-q*D)*P;b[13]=(c*S-d*M+g*D)*P;b[14]=(-t*v+y*K-F*J)*P;b[15]=(u*v-x*K+A*J)*P;return b},toRotationMat:function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,
b){b||(b=mat3.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],g=a[2],l=a[4],h=a[5],m=a[6],q=a[8],r=a[9],u=a[10],x=u*h-m*r,A=-u*l+m*q,B=r*l-h*q,t=c*x+d*A+g*B;if(!t)return null;t=1/t;b||(b=mat3.create());b[0]=x*t;b[1]=(-u*d+g*r)*t;b[2]=(m*d-g*h)*t;b[3]=A*t;b[4]=(u*c-g*q)*t;b[5]=(-m*c+g*l)*t;b[6]=B*t;b[7]=(-r*c+d*q)*t;b[8]=(h*c-d*l)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],
l=a[2],h=a[3],m=a[4],q=a[5],r=a[6],u=a[7],x=a[8],A=a[9],B=a[10],t=a[11],y=a[12],F=a[13],L=a[14];a=a[15];var J=b[0],K=b[1],I=b[2],v=b[3],E=b[4],H=b[5],D=b[6],M=b[7],N=b[8],S=b[9],R=b[10],w=b[11],P=b[12],X=b[13],e=b[14];b=b[15];c[0]=J*d+K*m+I*x+v*y;c[1]=J*g+K*q+I*A+v*F;c[2]=J*l+K*r+I*B+v*L;c[3]=J*h+K*u+I*t+v*a;c[4]=E*d+H*m+D*x+M*y;c[5]=E*g+H*q+D*A+M*F;c[6]=E*l+H*r+D*B+M*L;c[7]=E*h+H*u+D*t+M*a;c[8]=N*d+S*m+R*x+w*y;c[9]=N*g+S*q+R*A+w*F;c[10]=N*l+S*r+R*B+w*L;c[11]=N*h+S*u+R*t+w*a;c[12]=P*d+X*m+e*x+b*y;
c[13]=P*g+X*q+e*A+b*F;c[14]=P*l+X*r+e*B+b*L;c[15]=P*h+X*u+e*t+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],g=b[1];b=b[2];c[0]=a[0]*d+a[4]*g+a[8]*b+a[12];c[1]=a[1]*d+a[5]*g+a[9]*b+a[13];c[2]=a[2]*d+a[6]*g+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],g=b[1],l=b[2];b=b[3];c[0]=a[0]*d+a[4]*g+a[8]*l+a[12]*b;c[1]=a[1]*d+a[5]*g+a[9]*l+a[13]*b;c[2]=a[2]*d+a[6]*g+a[10]*l+a[14]*b;c[3]=a[3]*d+a[7]*g+a[11]*l+a[15]*b;return c},translate:function(a,b,c){var d=b[0],
g=b[1];b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*g+a[8]*b+a[12],a[13]=a[1]*d+a[5]*g+a[9]*b+a[13],a[14]=a[2]*d+a[6]*g+a[10]*b+a[14],a[15]=a[3]*d+a[7]*g+a[11]*b+a[15],a;var l=a[0],h=a[1],m=a[2],q=a[3],r=a[4],u=a[5],x=a[6],A=a[7],B=a[8],t=a[9],y=a[10],F=a[11];c[0]=l;c[1]=h;c[2]=m;c[3]=q;c[4]=r;c[5]=u;c[6]=x;c[7]=A;c[8]=B;c[9]=t;c[10]=y;c[11]=F;c[12]=l*d+r*g+B*b+a[12];c[13]=h*d+u*g+t*b+a[13];c[14]=m*d+x*g+y*b+a[14];c[15]=q*d+A*g+F*b+a[15];return c},scale:function(a,b,c){var d=b[0],g=b[1];b=b[2];if(!c||
a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=g,a[5]*=g,a[6]*=g,a[7]*=g,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*g;c[5]=a[5]*g;c[6]=a[6]*g;c[7]=a[7]*g;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},rotate:function(a,b,c,d){var g=c[0],l=c[1];c=c[2];var h=Math.sqrt(g*g+l*l+c*c);if(!h)return null;1!=h&&(h=1/h,g*=h,l*=h,c*=h);var m=Math.sin(b),q=Math.cos(b),r=1-q;b=a[0];var h=a[1],u=
a[2],x=a[3],A=a[4],B=a[5],t=a[6],y=a[7],F=a[8],L=a[9],J=a[10],K=a[11],I=g*g*r+q,v=l*g*r+c*m,E=c*g*r-l*m,H=g*l*r-c*m,D=l*l*r+q,M=c*l*r+g*m,N=g*c*r+l*m,g=l*c*r-g*m,l=c*c*r+q;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*I+A*v+F*E;d[1]=h*I+B*v+L*E;d[2]=u*I+t*v+J*E;d[3]=x*I+y*v+K*E;d[4]=b*H+A*D+F*M;d[5]=h*H+B*D+L*M;d[6]=u*H+t*D+J*M;d[7]=x*H+y*D+K*M;d[8]=b*N+A*g+F*l;d[9]=h*N+B*g+L*l;d[10]=u*N+t*g+J*l;d[11]=x*N+y*g+K*l;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);
var g=a[4],l=a[5],h=a[6],m=a[7],q=a[8],r=a[9],u=a[10],x=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=g*b+q*d;c[5]=l*b+r*d;c[6]=h*b+u*d;c[7]=m*b+x*d;c[8]=g*-d+q*b;c[9]=l*-d+r*b;c[10]=h*-d+u*b;c[11]=m*-d+x*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var g=a[0],l=a[1],h=a[2],m=a[3],q=a[8],r=a[9],u=a[10],x=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=
a;c[0]=g*b+q*-d;c[1]=l*b+r*-d;c[2]=h*b+u*-d;c[3]=m*b+x*-d;c[8]=g*d+q*b;c[9]=l*d+r*b;c[10]=h*d+u*b;c[11]=m*d+x*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var g=a[0],l=a[1],h=a[2],m=a[3],q=a[4],r=a[5],u=a[6],x=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=g*b+q*d;c[1]=l*b+r*d;c[2]=h*b+u*d;c[3]=m*b+x*d;c[4]=g*-d+q*b;c[5]=l*-d+r*b;c[6]=h*-d+u*b;c[7]=m*-d+x*b;return c},frustum:function(a,b,c,d,g,l,h){h||(h=mat4.create());
var m=b-a,q=d-c,r=l-g;h[0]=2*g/m;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*g/q;h[6]=0;h[7]=0;h[8]=(b+a)/m;h[9]=(d+c)/q;h[10]=-(l+g)/r;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(l*g*2)/r;h[15]=0;return h},perspective:function(a,b,c,d,g){a=c*Math.tan(a*Math.PI/360);b*=a;return mat4.frustum(-b,b,-a,a,c,d,g)},ortho:function(a,b,c,d,g,l,h){h||(h=mat4.create());var m=b-a,q=d-c,r=l-g;h[0]=2/m;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/q;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/r;h[11]=0;h[12]=-(a+b)/m;h[13]=-(d+c)/q;h[14]=-(l+g)/r;
h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=mat4.create());var g=a[0],l=a[1];a=a[2];var h=c[0],m=c[1],q=c[2];c=b[1];var r=b[2];if(g==b[0]&&l==c&&a==r)return mat4.identity(d);c=g-b[0];r=l-b[1];b=a-b[2];var u=1/Math.sqrt(c*c+r*r+b*b);c*=u;r*=u;b*=u;var x=m*b-q*r;q=q*c-h*b;h=h*r-m*c;(u=Math.sqrt(x*x+q*q+h*h))?(u=1/u,x*=u,q*=u,h*=u):h=q=x=0;m=r*h-b*q;var A=b*x-c*h;var B=c*q-r*x;(u=Math.sqrt(m*m+A*A+B*B))?(u=1/u,m*=u,A*=u,B*=u):B=A=m=0;d[0]=x;d[1]=m;d[2]=c;d[3]=0;d[4]=q;d[5]=A;d[6]=r;d[7]=0;d[8]=
h;d[9]=B;d[10]=b;d[11]=0;d[12]=-(x*g+q*l+h*a);d[13]=-(m*g+A*l+B*a);d[14]=-(c*g+r*l+b*a);d[15]=1;return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}};
quat4={create:function(a){var b=new glMatrixArrayType(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},calculateW:function(a,b){var c=a[0],d=a[1],g=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-g*g)),a;b[0]=c;b[1]=d;b[2]=g;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-g*g));return b},inverse:function(a,b){if(!b||a==b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},length:function(a){var b=
a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],g=a[2],l=a[3],h=Math.sqrt(c*c+d*d+g*g+l*l);if(0==h)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;h=1/h;b[0]=c*h;b[1]=d*h;b[2]=g*h;b[3]=l*h;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],l=a[2];a=a[3];var h=b[0],m=b[1],q=b[2];b=b[3];c[0]=d*b+a*h+g*q-l*m;c[1]=g*b+a*m+l*h-d*q;c[2]=l*b+a*q+d*m-g*h;c[3]=a*b-d*h-g*m-l*q;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],g=b[1],l=
b[2];b=a[0];var h=a[1],m=a[2];a=a[3];var q=a*d+h*l-m*g,r=a*g+m*d-b*l,u=a*l+b*g-h*d,d=-b*d-h*g-m*l;c[0]=q*a+d*-b+r*-m-u*-h;c[1]=r*a+d*-h+u*-b-q*-m;c[2]=u*a+d*-m+q*-h-r*-b;return c},toMat3:function(a,b){b||(b=mat3.create());var c=a[0],d=a[1],g=a[2],l=a[3],h=c+c,m=d+d,q=g+g,r=c*h,u=c*m,c=c*q,x=d*m,d=d*q,g=g*q,h=l*h,m=l*m,l=l*q;b[0]=1-(x+g);b[1]=u-l;b[2]=c+m;b[3]=u+l;b[4]=1-(r+g);b[5]=d-h;b[6]=c-m;b[7]=d+h;b[8]=1-(r+x);return b},toMat4:function(a,b){b||(b=mat4.create());var c=a[0],d=a[1],g=a[2],l=a[3],
h=c+c,m=d+d,q=g+g,r=c*h,u=c*m,c=c*q,x=d*m,d=d*q,g=g*q,h=l*h,m=l*m,l=l*q;b[0]=1-(x+g);b[1]=u-l;b[2]=c+m;b[3]=0;b[4]=u+l;b[5]=1-(r+g);b[6]=d-h;b[7]=0;b[8]=c-m;b[9]=d+h;b[10]=1-(r+x);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},slerp:function(a,b,c,d){d||(d=a);var g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<=Math.abs(g))return d!=a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;var l=Math.acos(g),h=Math.sqrt(1-g*g);if(.001>Math.abs(h))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+
.5*b[2],d[3]=.5*a[3]+.5*b[3],d;g=Math.sin((1-c)*l)/h;c=Math.sin(c*l)/h;d[0]=a[0]*g+b[0]*c;d[1]=a[1]*g+b[1]*c;d[2]=a[2]*g+b[2]*c;d[3]=a[3]*g+b[3]*c;return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};var TWEEN=TWEEN||function(){var a,b,c,d,g=[],l=null;return{start:function(a){c=setInterval(this.update,1E3/(a||60))},stop:function(){clearInterval(c)},add:function(a){g.push(a)},getAll:function(){return g},removeAll:function(){g=[]},remove:function(b){a=g.indexOf(b);-1!==a&&g.splice(a,1)},update:function(){a=0;b=g.length;for(d=(new Date).getTime();a<b;)g[a].update(d)?a++:(g.splice(a,1),b--);!g.length&&l&&(l(),l=null)},completeAll:function(){for(;g.length;)g[0].complete(),g.shift();l&&(l(),l=null)},
onComplete:function(a){l=a}}}();
TWEEN.Tween=function(a){var b={},c={},d={},g=1E3,l=0,h=null,m=TWEEN.Easing.Linear.EaseNone,q=null,r=null,u=null;this.to=function(b,c){null!==c&&(g=c);for(var h in b)null!==a[h]&&(d[h]=b[h]);return this};this.start=function(){TWEEN.add(this);h=(new Date).getTime()+l;for(var g in d)null!==a[g]&&(b[g]=a[g],c[g]=d[g]-a[g]);return this};this.stop=function(){TWEEN.remove(this);return this};this.delay=function(a){l=a;return this};this.easing=function(a){m=a;return this};this.chain=function(a){q=a};this.onUpdate=
function(a){r=a;return this};this.onComplete=function(a){u=a;return this};this.update=function(d){var l;if(d<h)return!0;d=(d-h)/g;d=1<d?1:d;var x=m(d);for(l in c)a[l]=b[l]+c[l]*x;null!==r&&r.call(a,x);return 1==d?(null!==u&&u.call(a),null!==q&&q.start(),!1):!0};this.complete=function(){for(property in c)a[property]=b[property]+c[property];null!==r&&r.call(a,1);null!==u&&u.call(a);null!==q&&q.complete()}};
TWEEN.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};TWEEN.Easing.Linear.EaseNone=function(a){return a};TWEEN.Easing.Quadratic.EaseIn=function(a){return a*a};TWEEN.Easing.Quadratic.EaseOut=function(a){return-a*(a-2)};TWEEN.Easing.Quadratic.EaseInOut=function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)};TWEEN.Easing.Cubic.EaseIn=function(a){return a*a*a};TWEEN.Easing.Cubic.EaseOut=function(a){return--a*a*a+1};
TWEEN.Easing.Cubic.EaseInOut=function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)};TWEEN.Easing.Quartic.EaseIn=function(a){return a*a*a*a};TWEEN.Easing.Quartic.EaseOut=function(a){return-(--a*a*a*a-1)};TWEEN.Easing.Quartic.EaseInOut=function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)};TWEEN.Easing.Quintic.EaseIn=function(a){return a*a*a*a*a};TWEEN.Easing.Quintic.EaseOut=function(a){return--a*a*a*a*a+1};
TWEEN.Easing.Quintic.EaseInOut=function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)};TWEEN.Easing.Sinusoidal.EaseIn=function(a){return-Math.cos(a*Math.PI/2)+1};TWEEN.Easing.Sinusoidal.EaseOut=function(a){return Math.sin(a*Math.PI/2)};TWEEN.Easing.Sinusoidal.EaseInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};TWEEN.Easing.Exponential.EaseIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))};TWEEN.Easing.Exponential.EaseOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};
TWEEN.Easing.Exponential.EaseInOut=function(a){return 0==a?0:1==a?1:1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)};TWEEN.Easing.Circular.EaseIn=function(a){return-(Math.sqrt(1-a*a)-1)};TWEEN.Easing.Circular.EaseOut=function(a){return Math.sqrt(1- --a*a)};TWEEN.Easing.Circular.EaseInOut=function(a){return 1>(a/=.5)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)};
TWEEN.Easing.Elastic.EaseIn=function(a){var b=.1,c=.4;if(0==a)return 0;if(1==a)return 1;c||(c=.3);if(!b||1>b){b=1;var d=c/4}else d=c/(2*Math.PI)*Math.asin(1/b);return-(b*Math.pow(2,10*--a)*Math.sin(2*(a-d)*Math.PI/c))};TWEEN.Easing.Elastic.EaseOut=function(a){var b=.1,c=.4;if(0==a)return 0;if(1==a)return 1;c||(c=.3);if(!b||1>b){b=1;var d=c/4}else d=c/(2*Math.PI)*Math.asin(1/b);return b*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/c)+1};
TWEEN.Easing.Elastic.EaseInOut=function(a){var b=.1,c=.4;if(0==a)return 0;if(1==a)return 1;c||(c=.3);if(!b||1>b){b=1;var d=c/4}else d=c/(2*Math.PI)*Math.asin(1/b);return 1>(a*=2)?-.5*b*Math.pow(2,10*--a)*Math.sin(2*(a-d)*Math.PI/c):b*Math.pow(2,-10*--a)*Math.sin(2*(a-d)*Math.PI/c)*.5+1};TWEEN.Easing.Back.EaseIn=function(a){return a*a*(2.70158*a-1.70158)};TWEEN.Easing.Back.EaseOut=function(a){return--a*a*(2.70158*a+1.70158)+1};
TWEEN.Easing.Back.EaseInOut=function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};TWEEN.Easing.Bounce.EaseIn=function(a){return 1-TWEEN.Easing.Bounce.EaseOut(1-a)};TWEEN.Easing.Bounce.EaseOut=function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};
TWEEN.Easing.Bounce.EaseInOut=function(a){return.5>a?.5*TWEEN.Easing.Bounce.EaseIn(2*a):.5*TWEEN.Easing.Bounce.EaseOut(2*a-1)+.5};var StatsJS=function(){var a=0,b=0,c=Date.now(),d=c,g=c,l=0,h=1E3,m=0,q=[[16,16,48],[0,255,255]],r=0,u=1E3,x=0,A=[[16,48,16],[0,255,0]],B=!0;var t=document.createElement("div");t.style.cursor="pointer";t.style.width="80px";t.style.opacity="0.9";t.style.zIndex="10001";t.addEventListener("mousedown",function(a){a.preventDefault();E()},!1);var y=document.createElement("div");y.style.textAlign="left";y.style.lineHeight="1.2em";y.style.backgroundColor="rgb("+Math.floor(q[0][0]/2)+","+Math.floor(q[0][1]/
2)+","+Math.floor(q[0][2]/2)+")";y.style.padding="0 0 3px 3px";t.appendChild(y);var F=document.createElement("div");F.style.fontFamily="Helvetica, Arial, sans-serif";F.style.fontSize="9px";F.style.color="rgb("+q[1][0]+","+q[1][1]+","+q[1][2]+")";F.style.fontWeight="bold";F.innerHTML="FPS";y.appendChild(F);var L=document.createElement("div");L.style.position="relative";L.style.width="74px";L.style.height="30px";L.style.backgroundColor="rgb("+q[1][0]+","+q[1][1]+","+q[1][2]+")";for(y.appendChild(L);74>
L.children.length;){var J=document.createElement("span");J.style.width="1px";J.style.height="30px";J.style.cssFloat="left";J.style.backgroundColor="rgb("+q[0][0]+","+q[0][1]+","+q[0][2]+")";L.appendChild(J)}var K=document.createElement("div");K.style.textAlign="left";K.style.lineHeight="1.2em";K.style.backgroundColor="rgb("+Math.floor(A[0][0]/2)+","+Math.floor(A[0][1]/2)+","+Math.floor(A[0][2]/2)+")";K.style.padding="0 0 3px 3px";K.style.display="none";t.appendChild(K);var I=document.createElement("div");
I.style.fontFamily="Helvetica, Arial, sans-serif";I.style.fontSize="9px";I.style.color="rgb("+A[1][0]+","+A[1][1]+","+A[1][2]+")";I.style.fontWeight="bold";I.innerHTML="MS";K.appendChild(I);var v=document.createElement("div");v.style.position="relative";v.style.width="74px";v.style.height="30px";v.style.backgroundColor="rgb("+A[1][0]+","+A[1][1]+","+A[1][2]+")";for(K.appendChild(v);74>v.children.length;)J=document.createElement("span"),J.style.width="1px",J.style.height=30*Math.random()+"px",J.style.cssFloat=
"left",J.style.backgroundColor="rgb("+A[0][0]+","+A[0][1]+","+A[0][2]+")",v.appendChild(J);var E=function(){a=(a+1)%2;B&&(0==a?(y.style.display="block",K.style.display="none"):(y.style.display="none",K.style.display="block"))};return{domElement:t,switchMode:E,show:function(){0==a?y.style.display="block":K.style.display="block";B=!0},hide:function(){y.style.display="none";K.style.display="none";B=!1},toggle:function(){B?this.hide():this.show()},update:function(){c=Date.now();r=c-d;u=Math.min(u,r);
x=Math.max(x,r);I.textContent=r+" MS ("+u+"-"+x+")";var a=Math.min(30,30-r/200*30);v.appendChild(v.firstChild).style.height=a+"px";d=c;b++;c>g+1E3&&(l=Math.round(1E3*b/(c-g)),h=Math.min(h,l),m=Math.max(m,l),F.textContent=l+" FPS ("+h+"-"+m+")",a=Math.min(30,30-l/100*30),L.appendChild(L.firstChild).style.height=a+"px",g=c,b=0)}}};var System={browser:function(){var a=navigator.userAgent;return/Arora/i.test(a)?"Arora":/Chrome/i.test(a)?"Chrome":/Epiphany/i.test(a)?"Epiphany":/Firefox/i.test(a)?"Firefox":/Mobile(\/.*)? Safari/i.test(a)?"Mobile Safari":/MSIE/i.test(a)?"Internet Explorer":/Midori/i.test(a)?"Midori":/Opera/.test(a)?"Opera":/Safari/i.test(a)?"Safari":!1}(),os:function(){var a=navigator.userAgent;return/Android/i.test(a)?"Android":/CrOS/i.test(a)?"Chrome OS":/iP[ao]d|iPhone/i.test(a)?"iOS":/Linux/i.test(a)?"Linux":
/Mac OS/i.test(a)?"Mac OS":/windows/i.test(a)?"Windows":!1}(),support:{canvas:!!window.CanvasRenderingContext2D,localStorage:function(){try{return!!window.localStorage.getItem}catch(a){return!1}}(),file:!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,fileSystem:!!window.requestFileSystem,requestAnimationFrame:!!window.mozRequestAnimationFrame||!!window.webkitRequestAnimationFrame||!!window.oRequestAnimationFrame||!!window.msRequestAnimationFrame,sessionStorage:function(){try{return!!window.sessionStorage.getItem}catch(a){return!1}}(),
webgl:!!window.WebGLRenderingContext,worker:!!window.Worker}};/*
 jQuery JavaScript Library v1.7.1
 http://jquery.com/

 Copyright 2011, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 Includes Sizzle.js
 http://sizzlejs.com/
 Copyright 2011, The Dojo Foundation
 Released under the MIT, BSD, and GPL Licenses.

 Date: Mon Nov 21 21:11:03 2011 -0500
 Sizzle CSS Selector Engine
  Copyright 2011, The Dojo Foundation
  Released under the MIT, BSD, and GPL Licenses.
  More information: http://sizzlejs.com/
*/
(function(a,b){function c(a){var b=va[a]={},f;a=a.split(/\s+/);var e=0;for(f=a.length;e<f;e++)b[a[e]]=!0;return b}function d(a,k,c){if(c===b&&1===a.nodeType)if(c="data-"+k.replace(Xa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:e.isNumeric(c)?parseFloat(c):Ya.test(c)?e.parseJSON(c):c}catch(n){}e.data(a,k,c)}else c=b;return c}function g(a){for(var b in a)if(("data"!==b||!e.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function l(a,
b,c){var f=b+"defer",k=b+"queue",p=b+"mark",d=e._data(a,f);!d||"queue"!==c&&e._data(a,k)||"mark"!==c&&e._data(a,p)||setTimeout(function(){e._data(a,k)||e._data(a,p)||(e.removeData(a,f,!0),d.fire())},0)}function h(){return!1}function m(){return!0}function q(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function r(a,b,c){b=b||0;if(e.isFunction(b))return e.grep(a,function(a,f){return!!b.call(a,f,a)===c});if(b.nodeType)return e.grep(a,function(a,f){return a===b===c});if("string"===typeof b){var f=
e.grep(a,function(a){return 1===a.nodeType});if(Za.test(b))return e.filter(b,f,!c);b=e.filter(b,f)}return e.grep(a,function(a,f){return 0<=e.inArray(a,b)===c})}function u(a){var b=wa.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function x(a,b){return e.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function A(a,b){if(1===b.nodeType&&e.hasData(a)){var f,k;var c=e._data(a);
var d=e._data(b,c),g=c.events;if(g)for(f in delete d.handle,d.events={},g)for(c=0,k=g[f].length;c<k;c++)e.event.add(b,f+(g[f][c].namespace?".":"")+g[f][c].namespace,g[f][c],g[f][c].data);d.data&&(d.data=e.extend({},d.data))}}function B(a,b){if(1===b.nodeType){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);var f=b.nodeName.toLowerCase();if("object"===f)b.outerHTML=a.outerHTML;else if("input"===f&&("checkbox"===a.type||"radio"===a.type))a.checked&&(b.defaultChecked=b.checked=
a.checked),b.value!==a.value&&(b.value=a.value);else if("option"===f)b.selected=a.defaultSelected;else if("input"===f||"textarea"===f)b.defaultValue=a.defaultValue;b.removeAttribute(e.expando)}}function t(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function y(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function F(a){var b=(a.nodeName||"").toLowerCase();"input"===b?y(a):
"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&e.grep(a.getElementsByTagName("input"),y)}function L(a,b){b.src?e.ajax({url:b.src,async:!1,dataType:"script"}):e.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}function J(a,b,c){var f="width"===b?a.offsetWidth:a.offsetHeight,k="width"===b?ab:bb,p=0,d=k.length;if(0<f){if("border"!==c)for(;p<d;p++)c||(f-=parseFloat(e.css(a,"padding"+k[p]))||0),f="margin"===c?f+(parseFloat(e.css(a,
c+k[p]))||0):f-(parseFloat(e.css(a,"border"+k[p]+"Width"))||0);return f+"px"}f=ca(a,b,b);if(0>f||null==f)f=a.style[b]||0;f=parseFloat(f)||0;if(c)for(;p<d;p++)f+=parseFloat(e.css(a,"padding"+k[p]))||0,"padding"!==c&&(f+=parseFloat(e.css(a,"border"+k[p]+"Width"))||0),"margin"===c&&(f+=parseFloat(e.css(a,c+k[p]))||0);return f+"px"}function K(a){return function(b,f){"string"!==typeof b&&(f=b,b="*");if(e.isFunction(f))for(var k=b.toLowerCase().split(xa),c=0,p=k.length,d,g;c<p;c++)d=k[c],(g=/^\+/.test(d))&&
(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[g?"unshift":"push"](f)}}function I(a,k,c,e,d,g){d=d||k.dataTypes[0];g=g||{};g[d]=!0;d=a[d];for(var f=0,p=d?d.length:0,n=a===ka,C;f<p&&(n||!C);f++)C=d[f](k,c,e),"string"===typeof C&&(!n||g[C]?C=b:(k.dataTypes.unshift(C),C=I(a,k,c,e,C,g)));!n&&C||g["*"]||(C=I(a,k,c,e,"*",g));return C}function v(a,k){var f,c,d=e.ajaxSettings.flatOptions||{};for(f in k)k[f]!==b&&((d[f]?a:c||(c={}))[f]=k[f]);c&&e.extend(!0,a,c)}function E(a,b,c,n){if(e.isArray(b))e.each(b,function(b,
f){c||cb.test(a)?n(a,f):E(a+"["+("object"===typeof f||e.isArray(f)?b:"")+"]",f,c,n)});else if(c||null==b||"object"!==typeof b)n(a,b);else for(var f in b)E(a+"["+f+"]",b[f],c,n)}function H(){try{return new a.XMLHttpRequest}catch(f){}}function D(){setTimeout(M,0);return fa=e.now()}function M(){fa=b}function N(a,b){var f={};e.each(ya.concat.apply([],ya.slice(0,b)),function(){f[this]=a});return f}function S(a){if(!ma[a]){var b=w.body,f=e("<"+a+">").appendTo(b),c=f.css("display");f.remove();if("none"===
c||""===c)U||(U=w.createElement("iframe"),U.frameBorder=U.width=U.height=0),b.appendChild(U),Y&&U.createElement||(Y=(U.contentWindow||U.contentDocument).document,Y.write(("CSS1Compat"===w.compatMode?"<!doctype html>":"")+"<html><body>"),Y.close()),f=Y.createElement(a),Y.body.appendChild(f),c=e.css(f,"display"),b.removeChild(U);ma[a]=c}return ma[a]}function R(a){return e.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var w=a.document,P=a.navigator,X=a.location,e=function(){function f(){if(!k.isReady){try{w.documentElement.doScroll("left")}catch(Vb){setTimeout(f,
1);return}k.ready()}}var k=function(a,b){return new k.fn.init(a,b,D)},c=a.jQuery,e=a.$,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,g=/\S/,Q=/^\s+/,h=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,q=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,z=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,u=/(webkit)[ \/]([\w.]+)/,M=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,A=/-([a-z]|[0-9])/ig,y=/^-ms-/,v=function(a,
b){return(b+"").toUpperCase()},N=P.userAgent,G,O,db=Object.prototype.toString,oa=Object.prototype.hasOwnProperty,ga=Array.prototype.push,da=Array.prototype.slice,Aa=String.prototype.trim,pa=Array.prototype.indexOf,B={};k.fn=k.prototype={constructor:k,init:function(a,f,c){if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!f&&w.body)return this.context=w,this[0]=w.body,this.selector=a,this.length=1,this;if("string"===typeof a){var e="<"===a.charAt(0)&&">"===
a.charAt(a.length-1)&&3<=a.length?[null,a,null]:d.exec(a);if(!e||!e[1]&&f)return!f||f.jquery?(f||c).find(a):this.constructor(f).find(a);if(e[1])return c=(f=f instanceof k?f[0]:f)?f.ownerDocument||f:w,(a=l.exec(a))?k.isPlainObject(f)?(a=[w.createElement(a[1])],k.fn.attr.call(a,f,!0)):a=[c.createElement(a[1])]:(a=k.buildFragment([e[1]],[c]),a=(a.cacheable?k.clone(a.fragment):a.fragment).childNodes),k.merge(this,a);if((f=w.getElementById(e[2]))&&f.parentNode){if(f.id!==e[2])return c.find(a);this.length=
1;this[0]=f}this.context=w;this.selector=a;return this}if(k.isFunction(a))return c.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return k.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return da.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,f){var c=this.constructor();k.isArray(a)?ga.apply(c,a):k.merge(c,a);c.prevObject=this;c.context=this.context;
"find"===b?c.selector=this.selector+(this.selector?" ":"")+f:b&&(c.selector=this.selector+"."+b+"("+f+")");return c},each:function(a,b){return k.each(this,a,b)},ready:function(a){k.bindReady();G.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(da.apply(this,arguments),"slice",da.call(arguments).join(","))},map:function(a){return this.pushStack(k.map(this,
function(b,f){return a.call(b,f,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ga,sort:[].sort,splice:[].splice};k.fn.init.prototype=k.fn;k.extend=k.fn.extend=function(){var a,f,c,e=arguments[0]||{},p=1,n=arguments.length,d=!1;"boolean"===typeof e&&(d=e,e=arguments[1]||{},p=2);"object"===typeof e||k.isFunction(e)||(e={});n===p&&(e=this,--p);for(;p<n;p++)if(null!=(a=arguments[p]))for(f in a){var C=e[f];var g=a[f];e!==g&&(d&&g&&(k.isPlainObject(g)||(c=k.isArray(g)))?(c?(c=
!1,C=C&&k.isArray(C)?C:[]):C=C&&k.isPlainObject(C)?C:{},e[f]=k.extend(d,C,g)):g!==b&&(e[f]=g))}return e};k.extend({noConflict:function(b){a.$===k&&(a.$=e);b&&a.jQuery===k&&(a.jQuery=c);return k},isReady:!1,readyWait:1,holdReady:function(a){a?k.readyWait++:k.ready(!0)},ready:function(a){if(!0===a&&!--k.readyWait||!0!==a&&!k.isReady){if(!w.body)return setTimeout(k.ready,1);k.isReady=!0;!0!==a&&0<--k.readyWait||(G.fireWith(w,[k]),k.fn.trigger&&k(w).trigger("ready").off("ready"))}},bindReady:function(){if(!G){G=
k.Callbacks("once memory");if("complete"===w.readyState)return setTimeout(k.ready,1);if(w.addEventListener)w.addEventListener("DOMContentLoaded",O,!1),a.addEventListener("load",k.ready,!1);else if(w.attachEvent){w.attachEvent("onreadystatechange",O);a.attachEvent("onload",k.ready);var b=!1;try{b=null==a.frameElement}catch(Wb){}w.documentElement.doScroll&&b&&f()}}},isFunction:function(a){return"function"===k.type(a)},isArray:Array.isArray||function(a){return"array"===k.type(a)},isWindow:function(a){return a&&
"object"===typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):B[db.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==k.type(a)||a.nodeType||k.isWindow(a))return!1;try{if(a.constructor&&!oa.call(a,"constructor")&&!oa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(Ba){return!1}for(var f in a);return f===b||oa.call(a,f)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);
},parseJSON:function(b){if("string"!==typeof b||!b)return null;b=k.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(m.test(b.replace(q,"@").replace(z,"]").replace(r,"")))return(new Function("return "+b))();k.error("Invalid JSON: "+b)},parseXML:function(f){try{if(a.DOMParser){var c=new DOMParser;var e=c.parseFromString(f,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(f)}catch(Xb){e=b}e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+
f);return e},noop:function(){},globalEval:function(b){b&&g.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(y,"ms-").replace(A,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,f,c){var e,p=0,n=a.length,d=n===b||k.isFunction(a);if(c)if(d)for(e in a){if(!1===f.apply(a[e],c))break}else for(;p<n&&!1!==f.apply(a[p++],c););else if(d)for(e in a){if(!1===f.call(a[e],e,a[e]))break}else for(;p<n&&!1!==
f.call(a[p],p,a[p++]););return a},trim:Aa?function(a){return null==a?"":Aa.call(a)}:function(a){return null==a?"":a.toString().replace(Q,"").replace(h,"")},makeArray:function(a,b){var f=b||[];if(null!=a){var c=k.type(a);null==a.length||"string"===c||"function"===c||"regexp"===c||k.isWindow(a)?ga.call(f,a):k.merge(f,a)}return f},inArray:function(a,b,f){if(b){if(pa)return pa.call(b,a,f);var k=b.length;for(f=f?0>f?Math.max(0,k+f):f:0;f<k;f++)if(f in b&&b[f]===a)return f}return-1},merge:function(a,f){var k=
a.length,c=0;if("number"===typeof f.length)for(var e=f.length;c<e;c++)a[k++]=f[c];else for(;f[c]!==b;)a[k++]=f[c++];a.length=k;return a},grep:function(a,b,f){var k=[];f=!!f;for(var c=0,e=a.length;c<e;c++){var p=!!b(a[c],c);f!==p&&k.push(a[c])}return k},map:function(a,f,c){var e,p=[],n=0,d=a.length;if(a instanceof k||d!==b&&"number"===typeof d&&(0<d&&a[0]&&a[d-1]||0===d||k.isArray(a)))for(;n<d;n++){var C=f(a[n],n,c);null!=C&&(p[p.length]=C)}else for(e in a)C=f(a[e],e,c),null!=C&&(p[p.length]=C);return p.concat.apply([],
p)},guid:1,proxy:function(a,f){if("string"===typeof f){var c=a[f];f=a;a=c}if(!k.isFunction(a))return b;var e=da.call(arguments,2),c=function(){return a.apply(f,e.concat(da.call(arguments)))};c.guid=a.guid=a.guid||c.guid||k.guid++;return c},access:function(a,f,c,e,p,n){var d=a.length;if("object"===typeof f){for(var C in f)k.access(a,C,f[C],e,p,c);return a}if(c!==b){e=!n&&e&&k.isFunction(c);for(C=0;C<d;C++)p(a[C],f,e?c.call(a[C],C,p(a[C],f)):c,n);return a}return d?p(a[0],f):b},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=u.exec(a)||M.exec(a)||x.exec(a)||0>a.indexOf("compatible")&&t.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,f){return new a.fn.init(b,f)}k.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(f,c){c&&c instanceof k&&!(c instanceof a)&&(c=a(c));return k.fn.init.call(this,f,c,b)};a.fn.init.prototype=a.fn;var b=a(w);return a},browser:{}});k.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){B["[object "+b+"]"]=b.toLowerCase()});N=k.uaMatch(N);N.browser&&(k.browser[N.browser]=!0,k.browser.version=N.version);k.browser.webkit&&(k.browser.safari=!0);g.test("\u00a0")&&(Q=/^[\s\xA0]+/,h=/[\s\xA0]+$/);var D=k(w);w.addEventListener?O=function(){w.removeEventListener("DOMContentLoaded",O,!1);k.ready()}:w.attachEvent&&(O=function(){"complete"===w.readyState&&(w.detachEvent("onreadystatechange",O),k.ready())});return k}(),va={};e.Callbacks=function(a){a=a?va[a]||c(a):{};var f=[],
p=[],n,d,g,Q,h,l=function(b){var c;var k=0;for(c=b.length;k<c;k++){var p=b[k];var n=e.type(p);"array"===n?l(p):"function"===n&&(a.unique&&q.has(p)||f.push(p))}},m=function(b,c){c=c||[];n=!a.memory||[b,c];d=!0;h=g||0;g=0;for(Q=f.length;f&&h<Q;h++)if(!1===f[h].apply(b,c)&&a.stopOnFalse){n=!0;break}d=!1;f&&(a.once?!0===n?q.disable():f=[]:p&&p.length&&(n=p.shift(),q.fireWith(n[0],n[1])))},q={add:function(){if(f){var a=f.length;l(arguments);d?Q=f.length:n&&!0!==n&&(g=a,m(n[0],n[1]))}return this},remove:function(){if(f)for(var b=
arguments,c=0,k=b.length;c<k;c++)for(var e=0;e<f.length&&(b[c]!==f[e]||(d&&e<=Q&&(Q--,e<=h&&h--),f.splice(e--,1),!a.unique));e++);return this},has:function(a){if(f)for(var b=0,c=f.length;b<c;b++)if(a===f[b])return!0;return!1},empty:function(){f=[];return this},disable:function(){f=p=n=b;return this},disabled:function(){return!f},lock:function(){p=b;n&&!0!==n||q.disable();return this},locked:function(){return!p},fireWith:function(b,f){p&&(d?a.once||p.push([b,f]):a.once&&n||m(b,f));return this},fire:function(){q.fireWith(this,
arguments);return this},fired:function(){return!!n}};return q};var qa=[].slice;e.extend({Deferred:function(a){var b=e.Callbacks("once memory"),f=e.Callbacks("once memory"),c=e.Callbacks("memory"),d="pending",g={resolve:b,reject:f,notify:c},Q={done:b.add,fail:f.add,progress:c.add,state:function(){return d},isResolved:b.fired,isRejected:f.fired,then:function(a,b,f){h.done(a).fail(b).progress(f);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,
b,f){return e.Deferred(function(c){e.each({done:[a,"resolve"],fail:[b,"reject"],progress:[f,"notify"]},function(a,b){var f=b[0],k=b[1],p;if(e.isFunction(f))h[a](function(){if((p=f.apply(this,arguments))&&e.isFunction(p.promise))p.promise().then(c.resolve,c.reject,c.notify);else c[k+"With"](this===h?c:this,[p])});else h[a](c[k])})}).promise()},promise:function(a){if(null==a)a=Q;else for(var b in Q)a[b]=Q[b];return a}},h=Q.promise({}),l;for(l in g)h[l]=g[l].fire,h[l+"With"]=g[l].fireWith;h.done(function(){d=
"resolved"},f.disable,c.lock).fail(function(){d="rejected"},b.disable,c.lock);a&&a.call(h,h);return h},when:function(a){function b(a){return function(b){c[a]=1<arguments.length?qa.call(arguments,0):b;--l||m.resolveWith(m,c)}}function f(a){return function(b){h[a]=1<arguments.length?qa.call(arguments,0):b;m.notifyWith(q,h)}}var c=qa.call(arguments,0),d=0,g=c.length,h=Array(g),l=g,m=1>=g&&a&&e.isFunction(a.promise)?a:e.Deferred(),q=m.promise();if(1<g){for(;d<g;d++)c[d]&&c[d].promise&&e.isFunction(c[d].promise)?
c[d].promise().then(b(d),m.reject,f(d)):--l;l||m.resolveWith(m,c)}else m!==a&&m.resolveWith(m,g?[a]:[]);return q}});e.support=function(){var b,c,p=w.createElement("div");p.setAttribute("className","t");p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var n=p.getElementsByTagName("*");var d=p.getElementsByTagName("a")[0];if(!n||!n.length||!d)return{};var g=w.createElement("select");var h=g.appendChild(w.createElement("option"));
n=p.getElementsByTagName("input")[0];var l={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===n.value,optSelected:h.selected,getSetAttribute:"t"!==p.className,enctype:!!w.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==w.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0};n.checked=!0;l.noCloneChecked=n.cloneNode(!0).checked;g.disabled=!0;l.optDisabled=!h.disabled;try{delete p.test}catch(Ub){l.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){l.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"));n=w.createElement("input");n.value="t";n.setAttribute("type","radio");
l.radioValue="t"===n.value;n.setAttribute("checked","checked");p.appendChild(n);d=w.createDocumentFragment();d.appendChild(p.lastChild);l.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;l.appendChecked=n.checked;d.removeChild(n);d.appendChild(p);p.innerHTML="";a.getComputedStyle&&(n=w.createElement("div"),n.style.width="0",n.style.marginRight="0",p.style.width="2px",p.appendChild(n),l.reliableMarginRight=0===(parseInt((a.getComputedStyle(n,null)||{marginRight:0}).marginRight,10)||0));if(p.attachEvent)for(c in{submit:1,
change:1,focusin:1}){n="on"+c;var m=n in p;m||(p.setAttribute(n,"return;"),m="function"===typeof p[n]);l[c+"Bubbles"]=m}d.removeChild(p);d=g=h=n=p=n=null;e(function(){var a=w.getElementsByTagName("body")[0];if(a){var f=w.createElement("div");f.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";a.insertBefore(f,a.firstChild);p=w.createElement("div");f.appendChild(p);p.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";
b=p.getElementsByTagName("td");m=0===b[0].offsetHeight;b[0].style.display="";b[1].style.display="none";l.reliableHiddenOffsets=m&&0===b[0].offsetHeight;p.innerHTML="";p.style.width=p.style.paddingLeft="1px";e.boxModel=l.boxModel=2===p.offsetWidth;"undefined"!==typeof p.style.zoom&&(p.style.display="inline",p.style.zoom=1,l.inlineBlockNeedsLayout=2===p.offsetWidth,p.style.display="",p.innerHTML="<div style='width:4px;'></div>",l.shrinkWrapBlocks=2!==p.offsetWidth);p.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;";
p.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";var c=p.firstChild;var k=c.firstChild;var n={doesNotAddBorder:5!==k.offsetTop,doesAddBorderForTableAndCells:5===c.nextSibling.firstChild.firstChild.offsetTop};k.style.position="fixed";k.style.top=
"20px";n.fixedPosition=20===k.offsetTop||15===k.offsetTop;k.style.position=k.style.top="";c.style.overflow="hidden";c.style.position="relative";n.subtractsBorderForOverflowNotVisible=-5===k.offsetTop;n.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop;a.removeChild(f);p=null;e.extend(l,n)}});return l}();var Ya=/^(?:\{.*\}|\[.*\])$/,Xa=/([A-Z])/g;e.extend({cache:{},uuid:0,expando:"jQuery"+(e.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
applet:!0},hasData:function(a){a=a.nodeType?e.cache[a[e.expando]]:a[e.expando];return!!a&&!g(a)},data:function(a,c,p,n){if(e.acceptData(a)){var f=e.expando;var k="string"===typeof c,d=a.nodeType,g=d?e.cache:a,h=d?a[f]:a[f]&&f,l="events"===c;if(h&&g[h]&&(l||n||g[h].data)||!k||p!==b){h||(d?a[f]=h=++e.uuid:h=f);g[h]||(g[h]={},d||(g[h].toJSON=e.noop));if("object"===typeof c||"function"===typeof c)n?g[h]=e.extend(g[h],c):g[h].data=e.extend(g[h].data,c);f=a=g[h];n||(a.data||(a.data={}),a=a.data);p!==b&&
(a[e.camelCase(c)]=p);if(l&&!a[c])return f.events;k?(p=a[c],null==p&&(p=a[e.camelCase(c)])):p=a;return p}}},removeData:function(a,b,c){if(e.acceptData(a)){var f,k,p=e.expando,d=a.nodeType,h=d?e.cache:a,l=d?a[p]:p;if(h[l]){if(b&&(f=c?h[l]:h[l].data)){e.isArray(b)||(b in f?b=[b]:(b=e.camelCase(b),b=b in f?[b]:b.split(" ")));var m=0;for(k=b.length;m<k;m++)delete f[b[m]];if(!(c?g:e.isEmptyObject)(f))return}if(!c&&(delete h[l].data,!g(h[l])))return;e.support.deleteExpando||!h.setInterval?delete h[l]:h[l]=
null;d&&(e.support.deleteExpando?delete a[p]:a.removeAttribute?a.removeAttribute(p):a[p]=null)}}},_data:function(a,b,c){return e.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=e.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});e.fn.extend({data:function(a,c){var f=null;if("undefined"===typeof a){if(this.length&&(f=e.data(this[0]),1===this[0].nodeType&&!e._data(this[0],"parsedAttrs"))){var k=this[0].attributes;for(var C=0,g=k.length;C<g;C++){var h=
k[C].name;0===h.indexOf("data-")&&(h=e.camelCase(h.substring(5)),d(this[0],h,f[h]))}e._data(this[0],"parsedAttrs",!0)}return f}if("object"===typeof a)return this.each(function(){e.data(this,a)});var l=a.split(".");l[1]=l[1]?"."+l[1]:"";return c===b?(f=this.triggerHandler("getData"+l[1]+"!",[l[0]]),f===b&&this.length&&(f=e.data(this[0],a),f=d(this[0],a,f)),f===b&&l[1]?this.data(l[0]):f):this.each(function(){var b=e(this),f=[l[0],c];b.triggerHandler("setData"+l[1]+"!",f);e.data(this,a,c);b.triggerHandler("changeData"+
l[1]+"!",f)})},removeData:function(a){return this.each(function(){e.removeData(this,a)})}});e.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",e._data(a,b,(e._data(a,b)||0)+1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){c=c||"fx";var f=c+"mark";(a=a?0:(e._data(b,f)||1)-1)?e._data(b,f,a):(e.removeData(b,f,!0),l(b,c,"mark"))}},queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var f=e._data(a,b);c&&(!f||e.isArray(c)?f=e._data(a,b,e.makeArray(c)):f.push(c));return f||[]}},dequeue:function(a,
b){b=b||"fx";var f=e.queue(a,b),c=f.shift(),k={};"inprogress"===c&&(c=f.shift());c&&("fx"===b&&f.unshift("inprogress"),e._data(a,b+".run",k),c.call(a,function(){e.dequeue(a,b)},k));f.length||(e.removeData(a,b+"queue "+b+".run",!0),l(a,b,"queue"))}});e.fn.extend({queue:function(a,c){"string"!==typeof a&&(c=a,a="fx");return c===b?e.queue(this[0],a):this.each(function(){var b=e.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&e.dequeue(this,a)})},dequeue:function(a){return this.each(function(){e.dequeue(this,
a)})},delay:function(a,b){a=e.fx?e.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,f){var c=setTimeout(b,a);f.stop=function(){clearTimeout(c)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function f(){--h||k.resolveWith(d,[d])}"string"!==typeof a&&(a=b);a=a||"fx";for(var k=e.Deferred(),d=this,g=d.length,h=1,l=a+"defer",m=a+"queue",q=a+"mark",r;g--;)if(r=e.data(d[g],l,b,!0)||(e.data(d[g],m,b,!0)||e.data(d[g],q,b,!0))&&e.data(d[g],l,e.Callbacks("once memory"),
!0))h++,r.add(f);f();return k.promise()}});var Ca=/[\n\t\r]/g,ha=/\s+/,eb=/\r/g,fb=/^(?:button|input)$/i,gb=/^(?:button|input|object|select|textarea)$/i,hb=/^a(?:rea)?$/i,Da=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ea=e.support.getSetAttribute;e.fn.extend({attr:function(a,b){return e.access(this,a,b,!0,e.attr)},removeAttr:function(a){return this.each(function(){e.removeAttr(this,a)})},prop:function(a,b){return e.access(this,
a,b,!0,e.prop)},removeProp:function(a){a=e.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(k){}})},addClass:function(a){var b,f;if(e.isFunction(a))return this.each(function(b){e(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a){var c=a.split(ha);var d=0;for(b=this.length;d<b;d++){var g=this[d];if(1===g.nodeType)if(g.className||1!==c.length){var h=" "+g.className+" ";var l=0;for(f=c.length;l<f;l++)~h.indexOf(" "+c[l]+" ")||(h+=c[l]+" ");g.className=
e.trim(h)}else g.className=a}}return this},removeClass:function(a){var f,c;if(e.isFunction(a))return this.each(function(b){e(this).removeClass(a.call(this,b,this.className))});if(a&&"string"===typeof a||a===b){var d=(a||"").split(ha);var g=0;for(f=this.length;g<f;g++){var h=this[g];if(1===h.nodeType&&h.className)if(a){var l=(" "+h.className+" ").replace(Ca," ");var m=0;for(c=d.length;m<c;m++)l=l.replace(" "+d[m]+" "," ");h.className=e.trim(l)}else h.className=""}}return this},toggleClass:function(a,
b){var f=typeof a,c="boolean"===typeof b;return e.isFunction(a)?this.each(function(f){e(this).toggleClass(a.call(this,f,this.className,b),b)}):this.each(function(){if("string"===f)for(var k,p=0,d=e(this),n=b,g=a.split(ha);k=g[p++];)n=c?n:!d.hasClass(k),d[n?"addClass":"removeClass"](k);else if("undefined"===f||"boolean"===f)this.className&&e._data(this,"__className__",this.className),this.className=this.className||!1===a?"":e._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=
0,f=this.length;b<f;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(Ca," ").indexOf(a))return!0;return!1},val:function(a){var f,c,d=this[0];if(arguments.length){var g=e.isFunction(a);return this.each(function(c){var k=e(this);1===this.nodeType&&(c=g?a.call(this,c,k.val()):a,null==c?c="":"number"===typeof c?c+="":e.isArray(c)&&(c=e.map(c,function(a){return null==a?"":a+""})),f=e.valHooks[this.nodeName.toLowerCase()]||e.valHooks[this.type],f&&"set"in f&&f.set(this,c,"value")!==b||
(this.value=c))})}if(d){if((f=e.valHooks[d.nodeName.toLowerCase()]||e.valHooks[d.type])&&"get"in f&&(c=f.get(d,"value"))!==b)return c;c=d.value;return"string"===typeof c?c.replace(eb,""):null==c?"":c}}});e.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,f=a.selectedIndex,c=[],d=a.options,g="select-one"===a.type;if(0>f)return null;a=g?f:0;for(b=g?f+1:d.length;a<b;a++){var h=d[a];if(!(!h.selected||(e.support.optDisabled?
h.disabled:null!==h.getAttribute("disabled"))||h.parentNode.disabled&&e.nodeName(h.parentNode,"optgroup"))){h=e(h).val();if(g)return h;c.push(h)}}return g&&!c.length&&d.length?e(d[f]).val():c},set:function(a,b){var f=e.makeArray(b);e(a).find("option").each(function(){this.selected=0<=e.inArray(e(this).val(),f)});f.length||(a.selectedIndex=-1);return f}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,n){var f,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(n&&
c in e.attrFn)return e(a)[c](d);if("undefined"===typeof a.getAttribute)return e.prop(a,c,d);if(n=1!==k||!e.isXMLDoc(a)){c=c.toLowerCase();var p=e.attrHooks[c]||(Da.test(c)?ib:W)}if(d!==b)if(null===d)e.removeAttr(a,c);else{if(p&&"set"in p&&n&&(f=p.set(a,d,c))!==b)return f;a.setAttribute(c,""+d);return d}else{if(p&&"get"in p&&n&&null!==(f=p.get(a,c)))return f;f=a.getAttribute(c);return null===f?b:f}}},removeAttr:function(a,b){var f,c,k=0;if(b&&1===a.nodeType){var d=b.toLowerCase().split(ha);for(c=d.length;k<
c;k++)if(f=d[k]){var g=e.propFix[f]||f;e.attr(a,f,"");a.removeAttribute(Ea?f:g);Da.test(f)&&g in a&&(a[g]=!1)}}},attrHooks:{type:{set:function(a,b){if(fb.test(a.nodeName)&&a.parentNode)e.error("type property can't be changed");else if(!e.support.radioValue&&"radio"===b&&e.nodeName(a,"input")){var f=a.value;a.setAttribute("type",b);f&&(a.value=f);return b}}},value:{get:function(a,b){return W&&e.nodeName(a,"button")?W.get(a,b):b in a?a.value:null},set:function(a,b,c){if(W&&e.nodeName(a,"button"))return W.set(a,
b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var f,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(1!==k||!e.isXMLDoc(a)){c=e.propFix[c]||c;var p=e.propHooks[c]}return d!==b?p&&"set"in p&&(f=p.set(a,d,c))!==b?f:a[c]=d:p&&"get"in p&&null!==(f=
p.get(a,c))?f:a[c]}},propHooks:{tabIndex:{get:function(a){var f=a.getAttributeNode("tabindex");return f&&f.specified?parseInt(f.value,10):gb.test(a.nodeName)||hb.test(a.nodeName)&&a.href?0:b}}}});e.attrHooks.tabindex=e.propHooks.tabIndex;var ib={get:function(a,c){var f,k=e.prop(a,c);return!0===k||"boolean"!==typeof k&&(f=a.getAttributeNode(c))&&!1!==f.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?e.removeAttr(a,c):(b=e.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};
if(!Ea){var jb={name:!0,id:!0};var W=e.valHooks.button={get:function(a,c){var f;return(f=a.getAttributeNode(c))&&(jb[c]?""!==f.nodeValue:f.specified)?f.nodeValue:b},set:function(a,b,c){var f=a.getAttributeNode(c);f||(f=w.createAttribute(c),a.setAttributeNode(f));return f.nodeValue=b+""}};e.attrHooks.tabindex.set=W.set;e.each(["width","height"],function(a,b){e.attrHooks[b]=e.extend(e.attrHooks[b],{set:function(a,f){if(""===f)return a.setAttribute(b,"auto"),f}})});e.attrHooks.contenteditable={get:W.get,
set:function(a,b,c){""===b&&(b="false");W.set(a,b,c)}}}e.support.hrefNormalized||e.each(["href","src","width","height"],function(a,c){e.attrHooks[c]=e.extend(e.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});e.support.style||(e.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}});e.support.optSelected||(e.propHooks.selected=e.extend(e.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,
a.parentNode&&a.parentNode.selectedIndex;return null}}));e.support.enctype||(e.propFix.enctype="encoding");e.support.checkOn||e.each(["radio","checkbox"],function(){e.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});e.each(["radio","checkbox"],function(){e.valHooks[this]=e.extend(e.valHooks[this],{set:function(a,b){if(e.isArray(b))return a.checked=0<=e.inArray(e(a).val(),b)}})});var ra=/^(?:textarea|input|select)$/i,Fa=/^([^\.]*)?(?:\.(.+))?$/,kb=/\bhover(\.\S+)?\b/,
lb=/^key/,mb=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,nb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ob=function(a){if(a=nb.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)");return a},Ha=function(a){return e.event.special.hover?a:a.replace(kb,"mouseenter$1 mouseleave$1")};e.event={add:function(a,c,d,n,g){var f;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(f=e._data(a))){if(d.handler){var k=d;d=k.handler}d.guid||(d.guid=e.guid++);var p=f.events;
p||(f.events=p={});var C=f.handle;C||(f.handle=C=function(a){return"undefined"===typeof e||a&&e.event.triggered===a.type?b:e.event.dispatch.apply(C.elem,arguments)},C.elem=a);c=e.trim(Ha(c)).split(" ");for(f=0;f<c.length;f++){var h=Fa.exec(c[f])||[];var l=h[1];var m=(h[2]||"").split(".").sort();var q=e.event.special[l]||{};l=(g?q.delegateType:q.bindType)||l;q=e.event.special[l]||{};h=e.extend({type:l,origType:h[1],data:n,handler:d,guid:d.guid,selector:g,quick:ob(g),namespace:m.join(".")},k);var r=
p[l];r||(r=p[l]=[],r.delegateCount=0,q.setup&&!1!==q.setup.call(a,n,m,C)||(a.addEventListener?a.addEventListener(l,C,!1):a.attachEvent&&a.attachEvent("on"+l,C)));q.add&&(q.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid));g?r.splice(r.delegateCount++,0,h):r.push(h);e.event.global[l]=!0}a=null}},global:{},remove:function(a,b,c,d,g){var f=e.hasData(a)&&e._data(a),k,p,n,C;if(f&&(C=f.events)){b=e.trim(Ha(b||"")).split(" ");for(k=0;k<b.length;k++){var h=Fa.exec(b[k])||[];var l=p=h[1];h=h[2];if(l){var m=
e.event.special[l]||{};l=(d?m.delegateType:m.bindType)||l;var q=C[l]||[];var r=q.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<q.length;n++){var u=q[n];!g&&p!==u.origType||c&&c.guid!==u.guid||h&&!h.test(u.namespace)||d&&d!==u.selector&&("**"!==d||!u.selector)||(q.splice(n--,1),u.selector&&q.delegateCount--,m.remove&&m.remove.call(a,u))}0===q.length&&r!==q.length&&(m.teardown&&!1!==m.teardown.call(a,h)||e.removeEvent(a,l,f.handle),delete C[l])}else for(l in C)e.event.remove(a,
l+b[k],c,d,!0)}if(e.isEmptyObject(C)){if(b=f.handle)b.elem=null;e.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(f,c,d,n){if(!d||3!==d.nodeType&&8!==d.nodeType){var k=f.type||f,p=[],g;if(!Ga.test(k+e.event.triggered)){if(0<=k.indexOf("!")){k=k.slice(0,-1);var h=!0}0<=k.indexOf(".")&&(p=k.split("."),k=p.shift(),p.sort());if(d&&!e.event.customEvent[k]||e.event.global[k])if(f="object"===typeof f?f[e.expando]?f:new e.Event(k,f):new e.Event(k),
f.type=k,f.isTrigger=!0,f.exclusive=h,f.namespace=p.join("."),f.namespace_re=f.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,h=0>k.indexOf(":")?"on"+k:"",d){f.result=b;f.target||(f.target=d);c=null!=c?e.makeArray(c):[];c.unshift(f);var l=e.event.special[k]||{};if(!l.trigger||!1!==l.trigger.apply(d,c)){var m=[[d,l.bindType||k]];if(!n&&!l.noBubble&&!e.isWindow(d)){var q=l.delegateType||k;p=Ga.test(q+k)?d:d.parentNode;for(g=null;p;p=p.parentNode)m.push([p,q]),g=p;g&&g===d.ownerDocument&&
m.push([g.defaultView||g.parentWindow||a,q])}for(g=0;g<m.length&&!f.isPropagationStopped();g++)p=m[g][0],f.type=m[g][1],(q=(e._data(p,"events")||{})[f.type]&&e._data(p,"handle"))&&q.apply(p,c),(q=h&&p[h])&&e.acceptData(p)&&!1===q.apply(p,c)&&f.preventDefault();f.type=k;n||f.isDefaultPrevented()||l._default&&!1!==l._default.apply(d.ownerDocument,c)||"click"===k&&e.nodeName(d,"a")||!e.acceptData(d)||!h||!d[k]||("focus"===k||"blur"===k)&&0===f.target.offsetWidth||e.isWindow(d)||((g=d[h])&&(d[h]=null),
e.event.triggered=k,d[k](),e.event.triggered=b,g&&(d[h]=g));return f.result}}else for(g in d=e.cache,d)d[g].events&&d[g].events[k]&&e.event.trigger(f,c,d[g].handle.elem,!0)}}},dispatch:function(f){f=e.event.fix(f||a.event);var c=(e._data(this,"events")||{})[f.type]||[],d=c.delegateCount,n=[].slice.call(arguments,0),g=!f.exclusive&&!f.namespace,h=[],l,m;n[0]=f;f.delegateTarget=this;if(d&&!f.target.disabled&&(!f.button||"click"!==f.type)){var q=e(this);q.context=this.ownerDocument||this;for(m=f.target;m!=
this;m=m.parentNode||this){var r={};var u=[];q[0]=m;for(l=0;l<d;l++){var z=c[l];var M=z.selector;if(r[M]===b){var x=r,w=M;if(z.quick){var t=z.quick;var A=m.attributes||{};t=(!t[1]||m.nodeName.toLowerCase()===t[1])&&(!t[2]||(A.id||{}).value===t[2])&&(!t[3]||t[3].test((A["class"]||{}).value))}else t=q.is(M);x[w]=t}r[M]&&u.push(z)}u.length&&h.push({elem:m,matches:u})}}c.length>d&&h.push({elem:this,matches:c.slice(d)});for(l=0;l<h.length&&!f.isPropagationStopped();l++)for(d=h[l],f.currentTarget=d.elem,
c=0;c<d.matches.length&&!f.isImmediatePropagationStopped();c++)if(z=d.matches[c],g||!f.namespace&&!z.namespace||f.namespace_re&&f.namespace_re.test(z.namespace))f.data=z.data,f.handleObj=z,z=((e.event.special[z.origType]||{}).handle||z.handler).apply(d.elem,n),z!==b&&(f.result=z,!1===z&&(f.preventDefault(),f.stopPropagation()));return f.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var f=c.button,e=c.fromElement;if(null==a.pageX&&null!=c.clientX){var k=a.target.ownerDocument||w;var d=k.documentElement;k=k.body;a.pageX=c.clientX+(d&&d.scrollLeft||k&&k.scrollLeft||0)-(d&&d.clientLeft||
k&&k.clientLeft||0);a.pageY=c.clientY+(d&&d.scrollTop||k&&k.scrollTop||0)-(d&&d.clientTop||k&&k.clientTop||0)}!a.relatedTarget&&e&&(a.relatedTarget=e===a.target?c.toElement:e);a.which||f===b||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[e.expando])return a;var c,f=a,d=e.event.fixHooks[a.type]||{},g=d.props?this.props.concat(d.props):this.props;a=e.Event(f);for(c=g.length;c;){var h=g[--c];a[h]=f[h]}a.target||(a.target=f.srcElement||w);3===a.target.nodeType&&(a.target=a.target.parentNode);
a.metaKey===b&&(a.metaKey=a.ctrlKey);return d.filter?d.filter(a,f):a},special:{ready:{setup:e.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){e.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=e.extend(new e.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?e.event.trigger(a,null,b):e.event.dispatch.call(b,a);a.isDefaultPrevented()&&
c.preventDefault()}};e.event.handle=e.event.dispatch;e.removeEvent=w.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};e.Event=function(a,b){if(!(this instanceof e.Event))return new e.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?m:h):this.type=a;b&&e.extend(this,b);this.timeStamp=a&&
a.timeStamp||e.now();this[e.expando]=!0};e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=m;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=m;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m;this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h};
e.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){e.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,f=a.handleObj;if(!c||c!==this&&!e.contains(this,c)){a.type=f.origType;var d=f.handler.apply(this,arguments);a.type=b}return d}}});e.support.submitBubbles||(e.event.special.submit={setup:function(){if(e.nodeName(this,"form"))return!1;e.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=e.nodeName(a,"input")||e.nodeName(a,"button")?
a.form:b)&&!a._submit_attached&&(e.event.add(a,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&e.event.simulate("submit",this.parentNode,a,!0)}),a._submit_attached=!0)})},teardown:function(){if(e.nodeName(this,"form"))return!1;e.event.remove(this,"._submit")}});e.support.changeBubbles||(e.event.special.change={setup:function(){if(ra.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)e.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),e.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,e.event.simulate("change",this,a,!0))});return!1}e.event.add(this,"beforeactivate._change",function(a){a=a.target;ra.test(a.nodeName)&&!a._change_attached&&(e.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||e.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){e.event.remove(this,"._change");return ra.test(this.nodeName)}});e.support.focusinBubbles||e.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,f=function(a){e.event.simulate(b,a.target,e.event.fix(a),!0)};e.event.special[b]={setup:function(){0===c++&&w.addEventListener(a,f,!0)},teardown:function(){0===--c&&w.removeEventListener(a,f,!0)}}});e.fn.extend({on:function(a,
c,d,n,g){var f;if("object"===typeof a){"string"!==typeof c&&(d=c,c=b);for(f in a)this.on(f,c,d,a[f],g);return this}null==d&&null==n?(n=c,d=c=b):null==n&&("string"===typeof c?(n=d,d=b):(n=d,d=c,c=b));if(!1===n)n=h;else if(!n)return this;if(1===g){var k=n;n=function(a){e().off(a);return k.apply(this,arguments)};n.guid=k.guid||(k.guid=e.guid++)}return this.each(function(){e.event.add(this,a,n,d,c)})},one:function(a,b,c,e){return this.on.call(this,a,b,c,e,1)},off:function(a,c,d){if(a&&a.preventDefault&&
a.handleObj){var f=a.handleObj;e(a.delegateTarget).off(f.namespace?f.type+"."+f.namespace:f.type,f.selector,f.handler);return this}if("object"===typeof a){for(f in a)this.off(f,c,a[f]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=h);return this.each(function(){e.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){e(this.context).on(a,this.selector,b,c);return this},die:function(a,b){e(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){e.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return e.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||e.guid++,f=0,d=function(c){var d=(e._data(this,"lastToggle"+a.guid)||0)%f;e._data(this,"lastToggle"+a.guid,d+1);c.preventDefault();
return b[d].apply(this,arguments)||!1};for(d.guid=c;f<b.length;)b[f++].guid=c;return this.click(d)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});e.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){e.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};
e.attrFn&&(e.attrFn[b]=!0);lb.test(b)&&(e.event.fixHooks[b]=e.event.keyHooks);mb.test(b)&&(e.event.fixHooks[b]=e.event.mouseHooks)});(function(){function a(a,b,c,f,e,d){e=0;for(var k=f.length;e<k;e++){var n=f[e];if(n){for(var p=!1,n=n[a];n;){if(n[g]===c){p=f[n.sizset];break}1!==n.nodeType||d||(n[g]=c,n.sizset=e);if(n.nodeName.toLowerCase()===b){p=n;break}n=n[a]}f[e]=p}}}function c(a,b,c,f,e,d){e=0;for(var k=f.length;e<k;e++){var n=f[e];if(n){for(var p=!1,n=n[a];n;){if(n[g]===c){p=f[n.sizset];break}if(1===
n.nodeType)if(d||(n[g]=c,n.sizset=e),"string"!==typeof b){if(n===b){p=!0;break}}else if(0<z.filter(b,[n]).length){p=n;break}n=n[a]}f[e]=p}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g="sizcache"+(Math.random()+"").replace(".",""),h=0,l=Object.prototype.toString,m=!1,q=!0,r=/\\/g,u=/\r\n/g,M=/\W/;[0,0].sort(function(){q=!1;return 0});var z=function(a,b,c,f){c=c||[];var e=b=b||w;if(1!==b.nodeType&&9!==
b.nodeType)return[];if(!a||"string"!==typeof a)return c;var k,n,g,p=!0,h=z.isXML(b),G=[],C=a;do if(d.exec(""),k=d.exec(C))if(C=k[3],G.push(k[1]),k[2]){var O=k[3];break}while(k);if(1<G.length&&A.exec(a))if(2===G.length&&t.relative[G[0]])var m=H(G[0]+G[1],b,f);else for(m=t.relative[G[0]]?[b]:z(G.shift(),b);G.length;)a=G.shift(),t.relative[a]&&(a+=G.shift()),m=H(a,m,f);else if(!f&&1<G.length&&9===b.nodeType&&!h&&t.match.ID.test(G[0])&&!t.match.ID.test(G[G.length-1])&&(k=z.find(G.shift(),b,h),b=k.expr?
z.filter(k.expr,k.set)[0]:k.set[0]),b)for(k=f?{expr:G.pop(),set:v(f)}:z.find(G.pop(),1!==G.length||"~"!==G[0]&&"+"!==G[0]||!b.parentNode?b:b.parentNode,h),m=k.expr?z.filter(k.expr,k.set):k.set,0<G.length?n=v(m):p=!1;G.length;)k=g=G.pop(),t.relative[g]?k=G.pop():g="",null==k&&(k=b),t.relative[g](n,k,h);else n=[];n||(n=m);n||z.error(g||a);if("[object Array]"===l.call(n))if(p)if(b&&1===b.nodeType)for(a=0;null!=n[a];a++)n[a]&&(!0===n[a]||1===n[a].nodeType&&z.contains(b,n[a]))&&c.push(m[a]);else for(a=
0;null!=n[a];a++)n[a]&&1===n[a].nodeType&&c.push(m[a]);else c.push.apply(c,n);else v(n,c);O&&(z(O,e,c,f),z.uniqueSort(c));return c};z.uniqueSort=function(a){if(B&&(m=q,a.sort(B),m))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};z.matches=function(a,b){return z(a,null,null,b)};z.matchesSelector=function(a,b){return 0<z(b,null,null,[a]).length};z.find=function(a,b,c){var f,e;if(!a)return[];var d=0;for(f=t.order.length;d<f;d++){var k=t.order[d];if(e=t.leftMatch[k].exec(a)){var n=
e[1];e.splice(1,1);if("\\"!==n.substr(n.length-1)){e[1]=(e[1]||"").replace(r,"");var g=t.find[k](e,b,c);if(null!=g){a=a.replace(t.match[k],"");break}}}}g||(g="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:g,expr:a}};z.filter=function(a,c,f,e){for(var d,k,n,g,p,h,l,G,C=a,m=[],O=c,q=c&&c[0]&&z.isXML(c[0]);a&&c.length;){for(n in t.filter)if(null!=(d=t.leftMatch[n].exec(a))&&d[2]&&(h=t.filter[n],p=d[1],k=!1,d.splice(1,1),"\\"!==p.substr(p.length-1))){O===m&&(m=
[]);if(t.preFilter[n])if(d=t.preFilter[n](d,O,f,m,e,q),!d)k=g=!0;else if(!0===d)continue;if(d)for(l=0;null!=(p=O[l]);l++)p&&(g=h(p,d,l,O),G=e^g,f&&null!=g?G?k=!0:O[l]=!1:G&&(m.push(p),k=!0));if(g!==b){f||(O=m);a=a.replace(t.match[n],"");if(!k)return[];break}}if(a===C)if(null==k)z.error(a);else break;C=a}return O};z.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var x=z.getText=function(a){var b;var c=a.nodeType;var f="";if(c)if(1===c||9===c){if("string"===typeof a.textContent)return a.textContent;
if("string"===typeof a.innerText)return a.innerText.replace(u,"");for(a=a.firstChild;a;a=a.nextSibling)f+=x(a)}else{if(3===c||4===c)return a.nodeValue}else for(c=0;b=a[c];c++)8!==b.nodeType&&(f+=x(b));return f},t=z.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=
"string"===typeof b,f=c&&!M.test(b),c=c&&!f;f&&(b=b.toLowerCase());for(var f=0,e=a.length,d;f<e;f++)if(d=a[f]){for(;(d=d.previousSibling)&&1!==d.nodeType;);a[f]=c||d&&d.nodeName.toLowerCase()===b?d||!1:d===b}c&&z.filter(b,a,!0)},">":function(a,b){var c,f="string"===typeof b,e=0,d=a.length;if(f&&!M.test(b))for(b=b.toLowerCase();e<d;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<d;e++)(c=a[e])&&(a[e]=f?c.parentNode:c.parentNode===b);f&&z.filter(b,a,!0)}},"":function(b,
f,e){var d=h++,k=c;if("string"===typeof f&&!M.test(f)){var n=f=f.toLowerCase();k=a}k("parentNode",f,d,b,n,e)},"~":function(b,f,e){var d=h++,k=c;if("string"===typeof f&&!M.test(f)){var n=f=f.toLowerCase();k=a}k("previousSibling",f,d,b,n,e)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],f=b.getElementsByName(a[1]),e=0,d=f.length;e<d;e++)f[e].getAttribute("name")===
a[1]&&c.push(f[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,f,e,d){a=" "+a[1].replace(r,"")+" ";if(d)return a;d=0;for(var k;null!=(k=b[d]);d++)k&&(e^(k.className&&0<=(" "+k.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||f.push(k):c&&(b[d]=!1));return!1},ID:function(a){return a[1].replace(r,"")},TAG:function(a,b){return a[1].replace(r,"").toLowerCase()},CHILD:function(a){if("nth"===
a[1]){a[2]||z.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&z.error(a[0]);a[0]=h++;return a},ATTR:function(a,b,c,f,e,d){b=a[1]=a[1].replace(r,"");!d&&t.attrMap[b]&&(a[1]=t.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(r,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,f,e){if("not"===a[1])if(1<(d.exec(a[3])||"").length||
/^\w/.test(a[3]))a[3]=z(a[3],null,null,b);else return a=z.filter(a[3],b,c,1^e),c||f.push.apply(f,a),!1;else if(t.match.POS.test(a[0])||t.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},
empty:function(a){return!a.firstChild},has:function(a,b,c){return!!z(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},
password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},
focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,f){return b===f.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,f){var e=b[1],d=t.filters[e];if(d)return d(a,c,b,f);if("contains"===e)return 0<=(a.textContent||a.innerText||
x([a])||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(f=b.length;c<f;c++)if(b[c]===a)return!1;return!0}z.error(e)},CHILD:function(a,b){var c;var f=b[1];var e=a;switch(f){case "only":case "first":for(;e=e.previousSibling;)if(1===e.nodeType)return!1;if("first"===f)return!0;e=a;case "last":for(;e=e.nextSibling;)if(1===e.nodeType)return!1;return!0;case "nth":f=b[2];var d=b[3];if(1===f&&0===d)return!0;var k=b[0];if((c=a.parentNode)&&(c[g]!==k||!a.nodeIndex)){var n=0;for(e=c.firstChild;e;e=e.nextSibling)1===
e.nodeType&&(e.nodeIndex=++n);c[g]=k}e=a.nodeIndex-d;return 0===f?0===e:0===e%f&&0<=e/f}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=z.attr?z.attr(a,c):t.attrHandle[c]?t.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),f=c+"",e=b[2],d=b[4];return null==c?"!="===
e:!e&&z.attr?null!=c:"="===e?f===d:"*="===e?0<=f.indexOf(d):"~="===e?0<=(" "+f+" ").indexOf(d):d?"!="===e?f!==d:"^="===e?0===f.indexOf(d):"$="===e?f.substr(f.length-d.length)===d:"|="===e?f===d||f.substr(0,d.length+1)===d+"-":!1:f&&!1!==c},POS:function(a,b,c,f){var e=t.setFilters[b[2]];if(e)return e(a,c,b,f)}}},A=t.match.POS,N=function(a,b){return"\\"+(b-0+1)},y;for(y in t.match)t.match[y]=new RegExp(t.match[y].source+/(?![^\[]*\])(?![^\(]*\))/.source),t.leftMatch[y]=new RegExp(/(^(?:.|\r|\n)*?)/.source+
t.match[y].source.replace(/\\(\d+)/g,N));var v=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(w.documentElement.childNodes,0)[0].nodeType}catch(G){v=function(a,b){var c=0,f=b||[];if("[object Array]"===l.call(a))Array.prototype.push.apply(f,a);else if("number"===typeof a.length)for(var e=a.length;c<e;c++)f.push(a[c]);else for(;a[c];c++)f.push(a[c]);return f}}if(w.documentElement.compareDocumentPosition)var B=function(a,b){return a===
b?(m=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1};else{B=function(a,b){if(a===b)return m=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c=[],f=[];var e=a.parentNode;var d=b.parentNode;var k=e;if(e===d)return D(a,b);if(!e)return-1;if(!d)return 1;for(;k;)c.unshift(k),k=k.parentNode;for(k=d;k;)f.unshift(k),k=k.parentNode;e=c.length;d=f.length;for(k=0;k<e&&k<d;k++)if(c[k]!==f[k])return D(c[k],
f[k]);return k===e?D(a,f[k],-1):D(c[k],b,1)};var D=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}}(function(){var a=w.createElement("div"),c="script"+(new Date).getTime(),f=w.documentElement;a.innerHTML="<a name='"+c+"'/>";f.insertBefore(a,f.firstChild);w.getElementById(c)&&(t.find.ID=function(a,c,f){if("undefined"!==typeof c.getElementById&&!f)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===
a[1]?[c]:b:[]},t.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});f.removeChild(a);f=a=null})();(function(){var a=w.createElement("div");a.appendChild(w.createComment(""));0<a.getElementsByTagName("*").length&&(t.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var f=[],e=0;c[e];e++)1===c[e].nodeType&&f.push(c[e]);c=f}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==
typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(t.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();w.querySelectorAll&&function(){var a=z,b=w.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){z=function(b,c,f,e){c=c||w;if(!e&&!z.isXML(c)){var d=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(d&&(1===c.nodeType||9===c.nodeType)){if(d[1])return v(c.getElementsByTagName(b),f);if(d[2]&&
t.find.CLASS&&c.getElementsByClassName)return v(c.getElementsByClassName(d[2]),f)}if(9===c.nodeType){if("body"===b&&c.body)return v([c.body],f);if(d&&d[3]){var k=c.getElementById(d[3]);if(k&&k.parentNode){if(k.id===d[3])return v([k],f)}else return v([],f)}try{return v(c.querySelectorAll(b),f)}catch(Ba){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var d=c,n=(k=c.getAttribute("id"))||"__sizzle__",g=c.parentNode,p=/^\s*[+~]/.test(b);k?n=n.replace(/'/g,"\\$&"):c.setAttribute("id",n);
p&&g&&(c=c.parentNode);try{if(!p||g)return v(c.querySelectorAll("[id='"+n+"'] "+b),f)}catch(Ba){}finally{k||d.removeAttribute("id")}}}return a(b,c,f,e)};for(var c in a)z[c]=a[c];b=null}}();(function(){var a=w.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(w.createElement("div"),"div"),f=!1;try{b.call(w.documentElement,"[test!='']:sizzle")}catch(ga){f=!0}z.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,
"='$1']");if(!z.isXML(a))try{if(f||!t.match.PSEUDO.test(e)&&!/!=/.test(e)){var d=b.call(a,e);if(d||!c||a.document&&11!==a.document.nodeType)return d}}catch(pa){}return 0<z(e,null,null,[a]).length}}})();(function(){var a=w.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(t.order.splice(1,0,"CLASS"),t.find.CLASS=function(a,b,c){if("undefined"!==
typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))})();z.contains=w.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:w.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};z.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var H=function(a,b,c){var f,e=[],d="";for(b=b.nodeType?[b]:b;f=t.match.PSEUDO.exec(a);)d+=f[0],a=a.replace(t.match.PSEUDO,
"");a=t.relative[a]?a+"*":a;f=0;for(var k=b.length;f<k;f++)z(a,b[f],e,c);return z.filter(d,e)};z.attr=e.attr;z.selectors.attrMap={};e.find=z;e.expr=z.selectors;e.expr[":"]=e.expr.filters;e.unique=z.uniqueSort;e.text=z.getText;e.isXMLDoc=z.isXML;e.contains=z.contains})();var pb=/Until$/,qb=/^(?:parents|prevUntil|prevAll)/,rb=/,/,Za=/^.[^:#\[\.,]*$/,sb=Array.prototype.slice,Ia=e.expr.match.POS,tb={children:!0,contents:!0,next:!0,prev:!0};e.fn.extend({find:function(a){var b=this,c;if("string"!==typeof a)return e(a).filter(function(){h=
0;for(c=b.length;h<c;h++)if(e.contains(b[h],this))return!0});var f=this.pushStack("","find",a),d,g;var h=0;for(c=this.length;h<c;h++){var l=f.length;e.find(a,this[h],f);if(0<h)for(d=l;d<f.length;d++)for(g=0;g<l;g++)if(f[g]===f[d]){f.splice(d--,1);break}}return f},has:function(a){var b=e(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(e.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(r(this,a,!1),"not",a)},filter:function(a){return this.pushStack(r(this,a,!0),
"filter",a)},is:function(a){return!!a&&("string"===typeof a?Ia.test(a)?0<=e(a,this.context).index(this[0]):0<e.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],f,d,k=this[0];if(e.isArray(a)){for(d=1;k&&k.ownerDocument&&k!==b;){for(f=0;f<a.length;f++)e(k).is(a[f])&&c.push({selector:a[f],elem:k,level:d});k=k.parentNode;d++}return c}var g=Ia.test(a)||"string"!==typeof a?e(a,b||this.context):0;f=0;for(d=this.length;f<d;f++)for(k=this[f];k;)if(g?-1<g.index(k):e.find.matchesSelector(k,
a)){c.push(k);break}else if(k=k.parentNode,!k||!k.ownerDocument||k===b||11===k.nodeType)break;c=1<c.length?e.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return a?"string"===typeof a?e.inArray(this[0],e(a)):e.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?e(a,b):e.makeArray(a&&a.nodeType?[a]:a),f=e.merge(this.get(),c);return this.pushStack(q(c[0])||q(f[0])?f:e.unique(f))},andSelf:function(){return this.add(this.prevObject)}});
e.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return e.dir(a,"parentNode")},parentsUntil:function(a,b,c){return e.dir(a,"parentNode",c)},next:function(a){return e.nth(a,2,"nextSibling")},prev:function(a){return e.nth(a,2,"previousSibling")},nextAll:function(a){return e.dir(a,"nextSibling")},prevAll:function(a){return e.dir(a,"previousSibling")},nextUntil:function(a,b,c){return e.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return e.dir(a,"previousSibling",
c)},siblings:function(a){return e.sibling(a.parentNode.firstChild,a)},children:function(a){return e.sibling(a.firstChild)},contents:function(a){return e.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:e.makeArray(a.childNodes)}},function(a,b){e.fn[a]=function(c,f){var d=e.map(this,b,c);pb.test(a)||(f=c);f&&"string"===typeof f&&(d=e.filter(f,d));d=1<this.length&&!tb[a]?e.unique(d):d;(1<this.length||rb.test(f))&&qb.test(a)&&(d=d.reverse());return this.pushStack(d,a,sb.call(arguments).join(","))}});
e.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?e.find.matchesSelector(b[0],a)?[b[0]]:[]:e.find.matches(a,b)},dir:function(a,c,d){var f=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!e(a).is(d));)1===a.nodeType&&f.push(a),a=a[c];return f},nth:function(a,b,c,e){b=b||1;for(e=0;a&&(1!==a.nodeType||++e!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var wa="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
ub=/ jQuery\d+="(?:\d+|null)"/g,sa=/^\s+/,Ja=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ka=/<([\w:]+)/,vb=/<tbody/i,wb=/<|&#?\w+;/,xb=/<(?:script|style)/i,yb=/<(?:script|object|embed|option|style)/i,La=new RegExp("<(?:"+wa+")","i"),Ma=/checked\s*(?:[^=]|=\s*.checked.)/i,zb=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)/,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Na=u(w);T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;e.support.htmlSerialize||(T._default=[1,"div<div>","</div>"]);e.fn.extend({text:function(a){return e.isFunction(a)?this.each(function(b){var c=e(this);c.text(a.call(this,b,c.text()))}):"object"!==typeof a&&a!==b?this.empty().append((this[0]&&
this[0].ownerDocument||w).createTextNode(a)):e.text(this)},wrapAll:function(a){if(e.isFunction(a))return this.each(function(b){e(this).wrapAll(a.call(this,b))});if(this[0]){var b=e(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return e.isFunction(a)?this.each(function(b){e(this).wrapInner(a.call(this,b))}):this.each(function(){var b=
e(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=e.isFunction(a);return this.each(function(c){e(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){e.nodeName(this,"body")||e(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=e.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,
e.clean(arguments));return a}},remove:function(a,b){for(var c=0,f;null!=(f=this[c]);c++)if(!a||e.filter(a,[f]).length)b||1!==f.nodeType||(e.cleanData(f.getElementsByTagName("*")),e.cleanData([f])),f.parentNode&&f.parentNode.removeChild(f);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&e.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return e.clone(this,
a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(ub,""):null;if("string"!==typeof a||xb.test(a)||!e.support.leadingWhitespace&&sa.test(a)||T[(Ka.exec(a)||["",""])[1].toLowerCase()])e.isFunction(a)?this.each(function(b){var c=e(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(Ja,"<$1></$2>");try{for(var c=0,f=this.length;c<f;c++)1===this[c].nodeType&&(e.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(n){this.empty().append(a)}}return this},
replaceWith:function(a){if(this[0]&&this[0].parentNode){if(e.isFunction(a))return this.each(function(b){var c=e(this),f=c.html();c.replaceWith(a.call(this,b,f))});"string"!==typeof a&&(a=e(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;e(this).remove();b?e(b).before(a):e(c).append(a)})}return this.length?this.pushStack(e(e.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var f,k=a[0],g=[];if(!e.support.checkClone&&
3===arguments.length&&"string"===typeof k&&Ma.test(k))return this.each(function(){e(this).domManip(a,c,d,!0)});if(e.isFunction(k))return this.each(function(f){var g=e(this);a[0]=k.call(this,f,c?g.html():b);g.domManip(a,c,d)});if(this[0]){var p=k&&k.parentNode;p=e.support.parentNode&&p&&11===p.nodeType&&p.childNodes.length===this.length?{fragment:p}:e.buildFragment(a,this,g);var h=p.fragment;if(f=1===h.childNodes.length?h=h.firstChild:h.firstChild){c=c&&e.nodeName(f,"tr");for(var l=0,m=this.length,
q=m-1;l<m;l++)d.call(c?x(this[l],f):this[l],p.cacheable||1<m&&l<q?e.clone(h,!0,!0):h)}g.length&&e.each(g,L)}return this}});e.buildFragment=function(a,b,c){var f,d,k,g=a[0];b&&b[0]&&(k=b[0].ownerDocument||b[0]);k.createDocumentFragment||(k=w);if(1===a.length&&"string"===typeof g&&512>g.length&&k===w&&"<"===g.charAt(0)&&!yb.test(g)&&(e.support.checkClone||!Ma.test(g))&&(e.support.html5Clone||!La.test(g))){var p=!0;(d=e.fragments[g])&&1!==d&&(f=d)}f||(f=k.createDocumentFragment(),e.clean(a,k,f,c));p&&
(e.fragments[g]=d?f:1);return{fragment:f,cacheable:p}};e.fragments={};e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){e.fn[a]=function(c){var f=[];c=e(c);var d=1===this.length&&this[0].parentNode;if(d&&11===d.nodeType&&1===d.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var d=0,k=c.length;d<k;d++){var g=(0<d?this.clone(!0):this).get();e(c[d])[b](g);f=f.concat(g)}return this.pushStack(f,a,c.selector)}});
e.extend({clone:function(a,b,c){var f;if(e.support.html5Clone||!La.test("<"+a.nodeName))var d=a.cloneNode(!0);else d=w.createElement("div"),Na.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild;var k=d;if(!(e.support.noCloneEvent&&e.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||e.isXMLDoc(a))){B(a,k);d=t(a);var g=t(k);for(f=0;d[f];++f)g[f]&&B(d[f],g[f])}if(b&&(A(a,k),c))for(d=t(a),g=t(k),f=0;d[f];++f)A(d[f],g[f]);return k},clean:function(a,b,c,d){b=b||w;"undefined"===typeof b.createElement&&
(b=b.ownerDocument||b[0]&&b[0].ownerDocument||w);for(var f=[],k,g=0,n;null!=(n=a[g]);g++)if("number"===typeof n&&(n+=""),n){if("string"===typeof n)if(wb.test(n)){n=n.replace(Ja,"<$1></$2>");k=(Ka.exec(n)||["",""])[1].toLowerCase();var p=T[k]||T._default,h=p[0],l=b.createElement("div");b===w?Na.appendChild(l):u(b).appendChild(l);for(l.innerHTML=p[1]+n+p[2];h--;)l=l.lastChild;if(!e.support.tbody)for(h=vb.test(n),p="table"!==k||h?"<table>"!==p[1]||h?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,
k=p.length-1;0<=k;--k)e.nodeName(p[k],"tbody")&&!p[k].childNodes.length&&p[k].parentNode.removeChild(p[k]);!e.support.leadingWhitespace&&sa.test(n)&&l.insertBefore(b.createTextNode(sa.exec(n)[0]),l.firstChild);n=l.childNodes}else n=b.createTextNode(n);var m;if(!e.support.appendChecked)if(n[0]&&"number"===typeof(m=n.length))for(k=0;k<m;k++)F(n[k]);else F(n);n.nodeType?f.push(n):f=e.merge(f,n)}if(c)for(a=function(a){return!a.type||zb.test(a.type)},g=0;f[g];g++)!d||!e.nodeName(f[g],"script")||f[g].type&&
"text/javascript"!==f[g].type.toLowerCase()?(1===f[g].nodeType&&(b=e.grep(f[g].getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(b))),c.appendChild(f[g])):d.push(f[g].parentNode?f[g].parentNode.removeChild(f[g]):f[g]);return f},cleanData:function(a){for(var b,c,f=e.cache,d=e.event.special,g=e.support.deleteExpando,h=0,l;null!=(l=a[h]);h++)if(!l.nodeName||!e.noData[l.nodeName.toLowerCase()])if(c=l[e.expando]){if((b=f[c])&&b.events){for(var m in b.events)d[m]?e.event.remove(l,m):e.removeEvent(l,
m,b.handle);b.handle&&(b.handle.elem=null)}g?delete l[e.expando]:l.removeAttribute&&l.removeAttribute(e.expando);delete f[c]}}});var ta=/alpha\([^)]*\)/i,Ab=/opacity=([^)]*)/,Bb=/([A-Z]|^ms)/g,Oa=/^-?\d+(?:px)?$/i,Cb=/^-?\d/,Db=/^([\-+])=([\-+.\de]+)/,Eb={position:"absolute",visibility:"hidden",display:"block"},ab=["Left","Right"],bb=["Top","Bottom"],Pa,Qa;e.fn.css=function(a,c){return 2===arguments.length&&c===b?this:e.access(this,a,c,!0,function(a,c,f){return f!==b?e.style(a,c,f):e.css(a,c)})};
e.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ca(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":e.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,g){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,k=e.camelCase(c),n=a.style,h=e.cssHooks[k];c=e.cssProps[k]||k;if(d!==b){if(g=typeof d,"string"===g&&(f=Db.exec(d))&&(d=+(f[1]+1)*
+f[2]+parseFloat(e.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||e.cssNumber[k]||(d+="px"),h&&"set"in h&&(d=h.set(a,d))===b)))try{n[c]=d}catch(la){}}else return h&&"get"in h&&(f=h.get(a,!1,g))!==b?f:n[c]}},css:function(a,c,d){var f;c=e.camelCase(c);var k=e.cssHooks[c];c=e.cssProps[c]||c;"cssFloat"===c&&(c="float");if(k&&"get"in k&&(f=k.get(a,!0,d))!==b)return f;if(ca)return ca(a,c)},swap:function(a,b,c){var f={},e;for(e in b)f[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=
f[e]}});e.curCSS=e.css;e.each(["height","width"],function(a,b){e.cssHooks[b]={get:function(a,c,f){var d;if(c){if(0!==a.offsetWidth)return J(a,b,f);e.swap(a,Eb,function(){d=J(a,b,f)});return d}},set:function(a,b){if(Oa.test(b)){if(b=parseFloat(b),0<=b)return b+"px"}else return b}}});e.support.opacity||(e.cssHooks.opacity={get:function(a,b){return Ab.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,f=a.currentStyle,
d=e.isNumeric(b)?"alpha(opacity="+100*b+")":"",k=f&&f.filter||c.filter||"";c.zoom=1;if(1<=b&&""===e.trim(k.replace(ta,""))&&(c.removeAttribute("filter"),f&&!f.filter))return;c.filter=ta.test(k)?k.replace(ta,d):k+" "+d}});e(function(){e.support.reliableMarginRight||(e.cssHooks.marginRight={get:function(a,b){var c;e.swap(a,{display:"inline-block"},function(){c=b?ca(a,"margin-right","marginRight"):a.style.marginRight});return c}})});w.defaultView&&w.defaultView.getComputedStyle&&(Pa=function(a,b){var c,
f;b=b.replace(Bb,"-$1").toLowerCase();if((c=a.ownerDocument.defaultView)&&(f=c.getComputedStyle(a,null))){var d=f.getPropertyValue(b);""!==d||e.contains(a.ownerDocument.documentElement,a)||(d=e.style(a,b))}return d});w.documentElement.currentStyle&&(Qa=function(a,b){var c,f,e=a.currentStyle&&a.currentStyle[b],d=a.style;null===e&&d&&(c=d[b])&&(e=c);if(!Oa.test(e)&&Cb.test(e)){c=d.left;if(f=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;d.left="fontSize"===b?"1em":e||0;
e=d.pixelLeft+"px";d.left=c;f&&(a.runtimeStyle.left=f)}return""===e?"auto":e});var ca=Pa||Qa;e.expr&&e.expr.filters&&(e.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!e.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||e.css(a,"display"))},e.expr.filters.visible=function(a){return!e.expr.filters.hidden(a)});var Fb=/%20/g,cb=/\[\]$/,Ra=/\r?\n/g,Gb=/#.*$/,Hb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ib=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Sa=/\?/,Lb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Mb=/^(?:select|textarea)/i,xa=/\s+/,Nb=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ua=e.fn.load,ka={},Va={};try{var Z=X.href}catch(f){Z=w.createElement("a"),Z.href="",Z=Z.href}var aa=Ta.exec(Z.toLowerCase())||[];e.fn.extend({load:function(a,c,d){if("string"!==typeof a&&Ua)return Ua.apply(this,arguments);if(!this.length)return this;var f=a.indexOf(" ");if(0<=f){var k=a.slice(f,a.length);
a=a.slice(0,f)}f="GET";c&&(e.isFunction(c)?(d=c,c=b):"object"===typeof c&&(c=e.param(c,e.ajaxSettings.traditional),f="POST"));var g=this;e.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(k?e("<div>").append(c.replace(Lb,"")).find(k):c));d&&g.each(d,[c,b,a])}});return this},serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?e.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Mb.test(this.nodeName)||Ib.test(this.type))}).map(function(a,b){var c=e(this).val();return null==c?null:e.isArray(c)?e.map(c,function(a,c){return{name:b.name,value:a.replace(Ra,"\r\n")}}):{name:b.name,value:c.replace(Ra,"\r\n")}}).get()}});e.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){e.fn[b]=function(a){return this.on(b,a)}});e.each(["get","post"],function(a,c){e[c]=function(a,
f,d,k){e.isFunction(f)&&(k=k||d,d=f,f=b);return e.ajax({type:c,url:a,data:f,success:d,dataType:k})}});e.extend({getScript:function(a,c){return e.get(a,b,c,"script")},getJSON:function(a,b,c){return e.get(a,b,c,"json")},ajaxSetup:function(a,b){b?v(a,e.ajaxSettings):(b=a,a=e.ajaxSettings);v(a,b);return a},ajaxSettings:{url:Z,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(aa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",
html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:K(ka),ajaxTransport:K(Va),ajax:function(a,c){function f(a,c,f,n){if(2!==w){w=2;x&&clearTimeout(x);M=b;t=n||"";v.readyState=0<a?4:0;n=c;if(f){var p=d,q=v,C=p.contents,r=p.dataTypes,
u=p.responseFields,z,A;for(D in u)D in f&&(q[u[D]]=f[D]);for(;"*"===r[0];)r.shift(),z===b&&(z=p.mimeType||q.getResponseHeader("content-type"));if(z)for(D in C)if(C[D]&&C[D].test(z)){r.unshift(D);break}if(r[0]in f)var y=r[0];else{for(D in f){if(!r[0]||p.converters[D+" "+r[0]]){y=D;break}A||(A=D)}y=y||A}y?(y!==r[0]&&r.unshift(y),f=f[y]):f=void 0}else f=b;if(200<=a&&300>a||304===a){if(d.ifModified){if(z=v.getResponseHeader("Last-Modified"))e.lastModified[B]=z;if(z=v.getResponseHeader("Etag"))e.etag[B]=
z}if(304===a){n="notmodified";var Q=!0}else try{z=d;z.dataFilter&&(f=z.dataFilter(f,z.dataType));var ea=z.dataTypes;var D={};var H,F,K=ea.length,V=ea[0];for(H=1;H<K;H++){if(1===H)for(F in z.converters)"string"===typeof F&&(D[F.toLowerCase()]=z.converters[F]);var O=V;V=ea[H];if("*"===V)V=O;else if("*"!==O&&O!==V){var J=O+" "+V;var E=D[J]||D["* "+V];if(!E){var I=b;for(G in D){var L=G.split(" ");if(L[0]===O||"*"===L[0])if(I=D[L[1]+" "+V]){var G=D[G];!0===G?E=I:!0===I&&(E=G);break}}}E||I||e.error("No conversion from "+
J.replace(" "," to "));!0!==E&&(f=E?E(f):I(G(f)))}}var la=f;n="success";Q=!0}catch(Ob){n="parsererror";var na=Ob}}else if(na=n,!n||a)n="error",0>a&&(a=0);v.status=a;v.statusText=""+(c||n);Q?h.resolveWith(k,[la,n,v]):h.rejectWith(k,[v,n,na]);v.statusCode(m);m=b;N&&g.trigger("ajax"+(Q?"Success":"Error"),[v,d,Q?la:na]);l.fireWith(k,[v,n]);N&&(g.trigger("ajaxComplete",[v,d]),--e.active||e.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);c=c||{};var d=e.ajaxSetup({},c),k=d.context||d,g=k!==d&&
(k.nodeType||k instanceof e)?e(k):e.event,h=e.Deferred(),l=e.Callbacks("once memory"),m=d.statusCode||{},q={},r={},t,u,M,x,w=0,A,v={readyState:0,setRequestHeader:function(a,b){if(!w){var c=a.toLowerCase();a=r[c]=r[c]||a;q[a]=b}return this},getAllResponseHeaders:function(){return 2===w?t:null},getResponseHeader:function(a){var c;if(2===w){if(!u)for(u={};c=Hb.exec(t);)u[c[1].toLowerCase()]=c[2];c=u[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){w||(d.mimeType=a);return this},abort:function(a){a=
a||"abort";M&&M.abort(a);f(0,a);return this}};h.promise(v);v.success=v.done;v.error=v.fail;v.complete=l.add;v.statusCode=function(a){if(a)if(2>w)for(b in a)m[b]=[m[b],a[b]];else{var b=a[v.status];v.then(b,b)}return this};d.url=((a||d.url)+"").replace(Gb,"").replace(Kb,aa[1]+"//");d.dataTypes=e.trim(d.dataType||"*").toLowerCase().split(xa);if(null==d.crossDomain){var y=Ta.exec(d.url.toLowerCase());d.crossDomain=!(!y||y[1]==aa[1]&&y[2]==aa[2]&&(y[3]||("http:"===y[1]?80:443))==(aa[3]||("http:"===aa[1]?
80:443)))}d.data&&d.processData&&"string"!==typeof d.data&&(d.data=e.param(d.data,d.traditional));I(ka,d,c,v);if(2===w)return!1;var N=d.global;d.type=d.type.toUpperCase();d.hasContent=!Jb.test(d.type);N&&0===e.active++&&e.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(Sa.test(d.url)?"&":"?")+d.data,delete d.data);var B=d.url;if(!1===d.cache){y=e.now();var D=d.url.replace(Nb,"$1_="+y);d.url=D+(D===d.url?(Sa.test(d.url)?"&":"?")+"_="+y:"")}}(d.data&&d.hasContent&&!1!==d.contentType||
c.contentType)&&v.setRequestHeader("Content-Type",d.contentType);d.ifModified&&(B=B||d.url,e.lastModified[B]&&v.setRequestHeader("If-Modified-Since",e.lastModified[B]),e.etag[B]&&v.setRequestHeader("If-None-Match",e.etag[B]));v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", */*; q=0.01":""):d.accepts["*"]);for(A in d.headers)v.setRequestHeader(A,d.headers[A]);if(d.beforeSend&&(!1===d.beforeSend.call(k,v,d)||2===w))return v.abort(),
!1;for(A in{success:1,error:1,complete:1})v[A](d[A]);if(M=I(Va,d,c,v)){v.readyState=1;N&&g.trigger("ajaxSend",[v,d]);d.async&&0<d.timeout&&(x=setTimeout(function(){v.abort("timeout")},d.timeout));try{w=1,M.send(q,f)}catch(O){if(2>w)f(-1,O);else throw O;}}else f(-1,"No Transport");return v},param:function(a,c){var d=[],f=function(a,b){b=e.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=e.ajaxSettings.traditional);if(e.isArray(a)||a.jquery&&!e.isPlainObject(a))e.each(a,
function(){f(this.name,this.value)});else for(var k in a)E(k,a[k],c,f);return d.join("&").replace(Fb,"+")}});e.extend({active:0,lastModified:{},etag:{}});var Pb=e.now(),ia=/(\=)\?(&|$)|\?\?/i;e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return e.expando+"_"+Pb++}});e.ajaxPrefilter("json jsonp",function(b,c,d){c="application/x-www-form-urlencoded"===b.contentType&&"string"===typeof b.data;if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(ia.test(b.url)||c&&ia.test(b.data))){var f,k=b.jsonpCallback=
e.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[k],h=b.url,l=b.data,p="$1"+k+"$2";!1!==b.jsonp&&(h=h.replace(ia,p),b.url===h&&(c&&(l=l.replace(ia,p)),b.data===l&&(h+=(/\?/.test(h)?"&":"?")+b.jsonp+"="+k)));b.url=h;b.data=l;a[k]=function(a){f=[a]};d.always(function(){a[k]=g;if(f&&e.isFunction(g))a[k](f[0])});b.converters["script json"]=function(){f||e.error(k+" was not called");return f[0]};b.dataTypes[0]="json";return"script"}});e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){e.globalEval(a);return a}}});e.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});e.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=w.head||w.getElementsByTagName("head")[0]||w.documentElement;return{send:function(f,e){c=w.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
f){if(f||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,f||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var ua=a.ActiveXObject?function(){for(var a in ba)ba[a](0,1)}:!1,Qb=0,ba;e.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&H()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(k){}b=void 0}return b}:H;(function(a){e.extend(e.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(e.ajaxSettings.xhr());e.support.ajax&&e.ajaxTransport(function(c){if(!c.crossDomain||e.support.cors){var d;return{send:function(f,g){var k=c.xhr(),h;c.username?k.open(c.type,c.url,c.async,c.username,c.password):k.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)k[h]=c.xhrFields[h];c.mimeType&&k.overrideMimeType&&k.overrideMimeType(c.mimeType);c.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(h in f)k.setRequestHeader(h,
f[h])}catch(V){}k.send(c.hasContent&&c.data||null);d=function(a,f){var h;try{if(d&&(f||4===k.readyState))if(d=b,l&&(k.onreadystatechange=e.noop,ua&&delete ba[l]),f)4!==k.readyState&&k.abort();else{var n=k.status;var p=k.getAllResponseHeaders();var m={};(h=k.responseXML)&&h.documentElement&&(m.xml=h);m.text=k.responseText;try{var q=k.statusText}catch(za){q=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=m.text?200:404}}catch(za){f||g(-1,za)}m&&g(n,q,m,p)};if(c.async&&4!==k.readyState){var l=++Qb;
ua&&(ba||(ba={},e(a).unload(ua)),ba[l]=d);k.onreadystatechange=d}else d()},abort:function(){d&&d(0,1)}}}});var ma={},U,Y,Rb=/^(?:toggle|show|hide)$/,Sb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ja,ya=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fa;e.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(N("show",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,e._data(a,
"olddisplay")||"none"!==b||(b=a.style.display=""),""===b&&"none"===e.css(a,"display")&&e._data(a,"olddisplay",S(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=e._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(N("hide",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=e.css(a,"display"),"none"===b||e._data(a,"olddisplay")||e._data(a,"olddisplay",b));for(c=0;c<d;c++)this[c].style&&
(this[c].style.display="none");return this},_toggle:e.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;e.isFunction(a)&&e.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:e(this).is(":hidden");e(this)[b?"show":"hide"]()}):this.animate(N("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function f(){!1===g.queue&&e._mark(this);
var b=e.extend({},g),c=1===this.nodeType,d=c&&e(this).is(":hidden"),f;b.animatedProperties={};for(f in a){var k=e.camelCase(f);f!==k&&(a[k]=a[f],delete a[f]);var h=a[k];e.isArray(h)?(b.animatedProperties[k]=h[1],h=a[k]=h[0]):b.animatedProperties[k]=b.specialEasing&&b.specialEasing[k]||b.easing||"swing";if("hide"===h&&d||"show"===h&&!d)return b.complete.call(this);!c||"height"!==k&&"width"!==k||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===e.css(this,"display")&&
"none"===e.css(this,"float")&&(e.support.inlineBlockNeedsLayout&&"inline"!==S(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(f in a)if(c=new e.fx(this,b,f),h=a[f],Rb.test(h))if(k=e._data(this,"toggle"+f)||("toggle"===h?d?"show":"hide":0))e._data(this,"toggle"+f,"show"===k?"hide":"show"),c[k]();else c[h]();else{k=Sb.exec(h);var l=c.cur();if(k){h=parseFloat(k[2]);var n=k[3]||(e.cssNumber[f]?"":"px");"px"!==n&&(e.style(this,f,
(h||1)+n),l*=(h||1)/c.cur(),e.style(this,f,l+n));k[1]&&(h=("-="===k[1]?-1:1)*h+l);c.custom(l,h,n)}else c.custom(l,h,"")}return!0}var g=e.speed(b,c,d);if(e.isEmptyObject(a))return this.each(g.complete,[!1]);a=e.extend({},a);return!1===g.queue?this.each(f):this.queue(g.queue,f)},stop:function(a,c,d){"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,c=!1,f=e.timers,g=e._data(this);d||e._unmark(!0,this);if(null==a)for(b in g){if(g[b]&&g[b].stop&&b.indexOf(".run")===
b.length-4){var k=g[b];e.removeData(this,b,!0);k.stop(d)}}else g[b=a+".run"]&&g[b].stop&&(g=g[b],e.removeData(this,b,!0),g.stop(d));for(b=f.length;b--;)if(f[b].elem===this&&(null==a||f[b].queue===a)){if(d)f[b](!0);else f[b].saveState();c=!0;f.splice(b,1)}d&&c||e.dequeue(this,a)})}});e.each({slideDown:N("show",1),slideUp:N("hide",1),slideToggle:N("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){e.fn[a]=function(a,c,d){return this.animate(b,a,
c,d)}});e.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?e.extend({},a):{complete:c||!c&&b||e.isFunction(a)&&a,duration:a,easing:c&&b||b&&!e.isFunction(b)&&b};d.duration=e.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in e.fx.speeds?e.fx.speeds[d.duration]:e.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){e.isFunction(d.old)&&d.old.call(this);d.queue?e.dequeue(this,d.queue):!1!==a&&e._unmark(this)};return d},easing:{linear:function(a,
b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||e.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=e.css(this.elem,this.prop);return isNaN(a=
parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function f(a){return g.step(a)}var g=this,k=e.fx;this.startTime=fa||D();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(e.cssNumber[this.prop]?"":"px");f.queue=this.options.queue;f.elem=this.elem;f.saveState=function(){g.options.hide&&e._data(g.elem,"fxshow"+g.prop)===b&&e._data(g.elem,"fxshow"+g.prop,g.start)};f()&&e.timers.push(f)&&!ja&&(ja=setInterval(k.tick,k.interval))},show:function(){var a=e._data(this.elem,
"fxshow"+this.prop);this.options.orig[this.prop]=a||e.style(this.elem,this.prop);this.options.show=!0;a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e._data(this.elem,"fxshow"+this.prop)||e.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,c=fa||D(),d=!0,f=this.elem,g=this.options;if(a||c>=g.duration+this.startTime){this.now=this.end;
this.pos=this.state=1;this.update();g.animatedProperties[this.prop]=!0;for(b in g.animatedProperties)!0!==g.animatedProperties[b]&&(d=!1);if(d){null==g.overflow||e.support.shrinkWrapBlocks||e.each(["","X","Y"],function(a,b){f.style["overflow"+b]=g.overflow[a]});g.hide&&e(f).hide();if(g.hide||g.show)for(b in g.animatedProperties)e.style(f,b,g.orig[b]),e.removeData(f,"fxshow"+b,!0),e.removeData(f,"toggle"+b,!0);if(a=g.complete)g.complete=!1,a.call(f)}return!1}Infinity==g.duration?this.now=c:(a=c-this.startTime,
this.state=a/g.duration,this.pos=e.easing[g.animatedProperties[this.prop]](this.state,a,0,1,g.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};e.extend(e.fx,{tick:function(){for(var a,b=e.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||e.fx.stop()},interval:13,stop:function(){clearInterval(ja);ja=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){e.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&
null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});e.each(["width","height"],function(a,b){e.fx.step[b]=function(a){e.style(a.elem,b,Math.max(0,a.now)+a.unit)}});e.expr&&e.expr.filters&&(e.expr.filters.animated=function(a){return e.grep(e.timers,function(b){return a===b.elem}).length});var Tb=/^t(?:able|d|h)$/i,Wa=/^(?:body|html)$/i;e.fn.offset="getBoundingClientRect"in w.documentElement?function(a){var b=this[0];if(a)return this.each(function(b){e.offset.setOffset(this,
a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return e.offset.bodyOffset(b);try{var c=b.getBoundingClientRect()}catch(ea){}var d=b.ownerDocument,f=d.documentElement;if(!c||!e.contains(f,b))return c?{top:c.top,left:c.left}:{top:0,left:0};b=d.body;d=R(d);return{top:c.top+(d.pageYOffset||e.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:c.left+(d.pageXOffset||e.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(b){e.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return e.offset.bodyOffset(b);var c=b.offsetParent,d=b.ownerDocument,f=d.documentElement,g=d.body;var h=(d=d.defaultView)?d.getComputedStyle(b,null):b.currentStyle;for(var l=b.offsetTop,m=b.offsetLeft;(b=b.parentNode)&&b!==g&&b!==f&&(!e.support.fixedPosition||"fixed"!==h.position);)h=d?d.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===
c&&(l+=b.offsetTop,m+=b.offsetLeft,!e.support.doesNotAddBorder||e.support.doesAddBorderForTableAndCells&&Tb.test(b.nodeName)||(l+=parseFloat(h.borderTopWidth)||0,m+=parseFloat(h.borderLeftWidth)||0),c=b.offsetParent),e.support.subtractsBorderForOverflowNotVisible&&"visible"!==h.overflow&&(l+=parseFloat(h.borderTopWidth)||0,m+=parseFloat(h.borderLeftWidth)||0);if("relative"===h.position||"static"===h.position)l+=g.offsetTop,m+=g.offsetLeft;e.support.fixedPosition&&"fixed"===h.position&&(l+=Math.max(f.scrollTop,
g.scrollTop),m+=Math.max(f.scrollLeft,g.scrollLeft));return{top:l,left:m}};e.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;e.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(e.css(a,"marginTop"))||0,c+=parseFloat(e.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=e.css(a,"position");"static"===d&&(a.style.position="relative");var f=e(a),g=f.offset(),k=e.css(a,"top"),h=e.css(a,"left"),l={};("absolute"===d||"fixed"===d)&&-1<e.inArray("auto",[k,
h])?(h=f.position(),d=h.top,h=h.left):(d=parseFloat(k)||0,h=parseFloat(h)||0);e.isFunction(b)&&(b=b.call(a,c,g));null!=b.top&&(l.top=b.top-g.top+d);null!=b.left&&(l.left=b.left-g.left+h);"using"in b?b.using.call(a,l):f.css(l)}};e.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=Wa.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(e.css(a,"marginTop"))||0;c.left-=parseFloat(e.css(a,"marginLeft"))||0;d.top+=parseFloat(e.css(b[0],
"borderTopWidth"))||0;d.left+=parseFloat(e.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||w.body;a&&!Wa.test(a.nodeName)&&"static"===e.css(a,"position");)a=a.offsetParent;return a})}});e.each(["Left","Top"],function(a,c){var d="scroll"+c;e.fn[d]=function(c){var f;if(c===b){var g=this[0];return g?(f=R(g))?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:e.support.boxModel&&f.document.documentElement[d]||
f.document.body[d]:g[d]:null}return this.each(function(){(f=R(this))?f.scrollTo(a?e(f).scrollLeft():c,a?c:e(f).scrollTop()):this[d]=c})}});e.each(["Height","Width"],function(a,c){var d=c.toLowerCase();e.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(e.css(a,d,"padding")):this[d]():null};e.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(e.css(b,d,a?"margin":"border")):this[d]():null};e.fn[d]=function(a){var f=this[0];if(!f)return null==a?null:this;if(e.isFunction(a))return this.each(function(b){var c=
e(this);c[d](a.call(this,b,c[d]()))});if(e.isWindow(f)){var g=f.document.documentElement["client"+c],h=f.document.body;return"CSS1Compat"===f.document.compatMode&&g||h&&h["client"+c]||g}return 9===f.nodeType?Math.max(f.documentElement["client"+c],f.body["scroll"+c],f.documentElement["scroll"+c],f.body["offset"+c],f.documentElement["offset"+c]):a===b?(f=e.css(f,d),g=parseFloat(f),e.isNumeric(g)?g:f):this.css(d,"string"===typeof a?a:a+"px")}});(function(a){a.fn.disableSelection=function(){return this.each(function(){a(this).attr("unselectable",
"on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}})(e);a.jQuery=a.$=e;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return e})})(window);if("undefined"===typeof Element.prototype.setCapture){var cloneMouseEvent=function(a){if(document.createEvent){var b=document.createEvent("MouseEvent");b.initMouseEvent(a.type,a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}else b=new MouseEvent(a.type,a);var c=a.buttons;b.buttons!==c&&Object.defineProperty(b,"buttons",{get:function(){return c}});return b},handleCapturedEvent=function(a){try{window.removeEventListener(a.type,
handleCapturedEvent,!0);try{captureElement.dispatchEvent(cloneMouseEvent(a))}finally{window.addEventListener(a.type,handleCapturedEvent,!0)}}finally{a.stopImmediatePropagation()}},mouseEventNames="click dblclick mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup".split(" "),captureElement=null;Element.prototype.setCapture=function(){captureElement=this;for(var a=0;a<mouseEventNames.length;a++)window.addEventListener(mouseEventNames[a],handleCapturedEvent,!0)};var originalReleaseCapture=
Document.prototype.releaseCapture;Document.prototype.releaseCapture=function(){null!=originalReleaseCapture&&originalReleaseCapture.call(this);for(var a=0;a<mouseEventNames.length;a++)window.removeEventListener(mouseEventNames[a],handleCapturedEvent,!0);captureElement=null}};function bind(a,b){return function(){b.apply(a,arguments)}}function extend(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function clamp(a,b,c){return a?a<b?b:a>c?c:a:b}function map(a,b,c,d,g){return(a-b)*(g-d)/(c-b)+d}function multipleOfTwo(a){for(var b=a;!(b&1);)if(1===(b/=2))return a;return 0}
function getURLParams(){var a={},b=/^[-+]?\d*\.?\d+$/,c=window.location.href.match(/[^?&#]*=[^&#]*/g)||[],d;for(d=0;d<c.length;d++){var g=c[d].split("=");a[g[0]]=b.test(g[1])?parseFloat(g[1]):g[1]}return a}function applyURLParams(a){var b=getURLParams();a=a||window;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function hexToRGB(a){return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255,1]}
vec3.assign=function(a,b,c,d){a[0]=b="number"===typeof b?b:0;a[1]="number"===typeof c?c:b;a[2]="number"===typeof d?d:b;return a};vec3.zero=function(a){a[0]=a[1]=a[2]=0;return a};vec3.lengthSquared=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};vec3.angle=function(a,b){return Math.acos(this.dot(a,b)/this.length(a)/vec3.length(b))};vec3.equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};
Clock={time:null,start:function(){this.time=(new Date).getTime()},stop:function(){console.log((new Date).getTime()-this.time)}};var WebGLUtilities={loadShaderScript:function(a){a=document.getElementById(a);if("x-shader/x-fragment"===a.type)var b=this.createShader(this.FRAGMENT_SHADER);else if("x-shader/x-vertex"===a.type)b=this.createShader(this.VERTEX_SHADER);else return null;this.shaderSource(b,a.text);this.compileShader(b);return this.getShaderParameter(b,this.COMPILE_STATUS)?b:(console.log("shader "+this.getShaderInfoLog(b)),null)},linkShaderProgramm:function(a,b){var c=this.createProgram();this.attachShader(c,a);this.attachShader(c,
b);this.linkProgram(c);this.getProgramParameter(c,this.LINK_STATUS)||console.log("Unable to initialize the shader program.");return c},loadShader:function(a,b){var c=this.loadShaderScript(a),d=this.loadShaderScript(b);return this.linkShaderProgramm(c,d)},textureCount:0,loadTexture:function(a,b,c,d){var g=this,l=g.createTexture();l.ID=g.textureCount++;l.image=new Image;l.image.onload=function(){g.textureImageLoaded(l,b,d);c&&c(g,l)};l.image.src=a;return l},textureImageLoaded:function(a,b,c){wrapping=
c?this.REPEAT:this.CLAMP_TO_EDGE;this.activeTexture(this["TEXTURE"+a.ID]);this.bindTexture(this.TEXTURE_2D,a);this.texImage2D(this.TEXTURE_2D,0,this.RGBA,this.RGBA,this.UNSIGNED_BYTE,a.image);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,wrapping);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,wrapping);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MAG_FILTER,this.LINEAR);b?(this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MIN_FILTER,this.LINEAR_MIPMAP_LINEAR),this.generateMipmap(this.TEXTURE_2D)):
this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MIN_FILTER,this.LINEAR);this.bindTexture(this.TEXTURE_2D,null)},passTexture:function(a,b){this.activeTexture(this["TEXTURE"+a.ID]);this.bindTexture(this.TEXTURE_2D,a);this.uniform1i(b,a.ID)},matrixStack:[],stackPosition:0,matrix:mat4.create(),pushMatrix:function(){var a=this.stackPosition,b=this.matrixStack,c=this.matrix;a<b.length?mat4.set(c,b[a]):b.push(mat4.create(c));this.stackPosition++},popMatrix:function(){var a=--this.stackPosition,b=this.matrixStack;
if(!b.length)throw"error: popMatrix failed";mat4.set(b[a],this.matrix)},passMatrix:function(a,b){this.uniformMatrix4fv(a,!1,b||this.matrix)},enableAlpha:function(){this.enable(this.BLEND);this.blendFunc(this.SRC_ALPHA,this.ONE_MINUS_SRC_ALPHA)},disableAlpha:function(){this.disable(this.BLEND)},initQuad:function(){this.quadAttributeBuffer=this.createBuffer();this.bindBuffer(this.ARRAY_BUFFER,this.quadAttributeBuffer);this.bufferData(this.ARRAY_BUFFER,112,this.STATIC_DRAW);this.bufferSubData(this.ARRAY_BUFFER,
0,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]));this.bufferSubData(this.ARRAY_BUFFER,48,new Float32Array([0,0,0,1,1,1,1,0,0,0,0,1,20,1,20,0]));this.quadIndexBuffer=this.createBuffer();this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer);this.bufferData(this.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,3]),this.STATIC_DRAW)},updateQuadTexCoords:function(a){this.bindBuffer(this.ARRAY_BUFFER,this.quadAttributeBuffer);this.bufferSubData(this.ARRAY_BUFFER,48,new Float32Array([0,0,0,1,1,1,
1,0,0,0,0,1,a,1,a,0]))},drawQuad:function(a,b){b=48+(b||0);this.bindBuffer(this.ARRAY_BUFFER,this.quadAttributeBuffer);this.vertexAttribPointer(a.positionAttribute,3,this.FLOAT,!1,0,0);this.vertexAttribPointer(a.texCoordAttribute,2,this.FLOAT,!1,0,b);this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer);this.drawElements(this.TRIANGLE_FAN,4,this.UNSIGNED_SHORT,0)},fboCount:0,identity:mat4.identity(mat4.create()),initFBO:function(a,b,c){c||(c=this.createFramebuffer(),c.texture=this.createTexture(),
c.depthBuffer=this.createRenderbuffer(),c.texture.ID=this.textureCount++);c.width=a;c.height=b;this.bindTexture(this.TEXTURE_2D,c.texture);this.texImage2D(this.TEXTURE_2D,0,this.RGBA,c.width,c.height,0,this.RGBA,this.UNSIGNED_BYTE,null);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_S,this.CLAMP_TO_EDGE);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_WRAP_T,this.CLAMP_TO_EDGE);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MAG_FILTER,this.LINEAR);this.texParameteri(this.TEXTURE_2D,this.TEXTURE_MIN_FILTER,
this.LINEAR);this.bindRenderbuffer(this.RENDERBUFFER,c.depthBuffer);this.renderbufferStorage(this.RENDERBUFFER,this.DEPTH_COMPONENT16,c.width,c.height);this.bindFramebuffer(this.FRAMEBUFFER,c);this.framebufferTexture2D(this.FRAMEBUFFER,this.COLOR_ATTACHMENT0,this.TEXTURE_2D,c.texture,0);this.framebufferRenderbuffer(this.FRAMEBUFFER,this.DEPTH_ATTACHMENT,this.RENDERBUFFER,c.depthBuffer);this.bindTexture(this.TEXTURE_2D,null);this.bindRenderbuffer(this.RENDERBUFFER,null);this.bindFramebuffer(this.FRAMEBUFFER,
null);return c},bindFBO:function(a){this.bindFramebuffer(this.FRAMEBUFFER,a);this.viewport(0,0,a.width,a.height);Game.gameover?this.clear(this.COLOR_BUFFER_BIT|this.DEPTH_BUFFER_BIT):this.clear(this.COLOR_BUFFER_BIT)},drawFBO:function(a,b){this.bindFramebuffer(this.FRAMEBUFFER,null);this.viewport(0,0,canvas.width,canvas.height);this.passTexture(a.texture,b.textureUniform);this.uniformMatrix4fv(b.mvMatrixUniform,!1,this.identity);this.uniformMatrix4fv(b.pMatrixUniform,!1,this.identity);this.drawQuad(b)}};var StateMachine=function(a){this.scope=a;this.currentState=new this.State;this.states={};this.transitions={}};
StateMachine.prototype={State:function(a){a=a||{};this.name=a.name||"none";this.enter=a.enter||function(a){};this.update=a.update||function(a,c){};this.draw=a.draw||function(a,c){};this.exit=a.exit||function(a){}},Transition:function(a){a=a||{};this.name=a.name||"none";this.from=a.from||"none";this.to=a.to||"none";this.callback=a.callback||function(a){}},init:function(a){var b,c=a.states instanceof Array?a.states:[];transitions=a.transitions instanceof Array?a.transitions:[];for(b=0;b<c.length;b++)this.addState(new this.State(c[b]));
for(b=0;b<transitions.length;b++)this.addTransition(new this.Transition(transitions[b]));this.states[a.initial]&&this.changeState(a.initial)},update:function(a){this.currentState.update.call(this.scope,a,this)},draw:function(a){this.currentState.draw.call(this.scope,a,this)},addState:function(a){this.states[a.name]=a},addTransition:function(a){var b=this;this.transitions[a.name]=a;this[a.name]=function(){return b.currentState.name===a.to||b.currentState.name!==a.from&&"*"!==a.from?!1:(b.changeState(a.to,
a.callback,arguments),!0)}},changeState:function(a,b,c){var d=[];this.currentState.exit.call(this.scope);this.currentState=this.states[a];b&&(c=c||[],d.push.apply(d,c),d.push(this),b.apply(this.scope,d));this.currentState.enter.call(this.scope)},hasState:function(a){return this.currentState.name===a}};var Cube=function(a){this.element=a;this.vertices=[];var b;for(b=0;24>b;b++)this.vertices.push(vec3.add(a.position,Cube.vertexVectors[b],vec3.create()))};
Cube.prototype={vector:vec3.create(),vector2:vec3.create(),vector3:vec3.create(),distanceToRay:function(a,b){var c=this.vector,d=this.vector2;vec3.subtract(this.element.position,a,c);vec3.scale(b,vec3.dot(b,c),d);vec3.subtract(c,d);return vec3.lengthSquared(c)},intersectsRay:function(a,b){var c,d=Cube.normalVectors,g=this.vertices,l=this.vector,h=this.vector2,m=this.vector3;for(c=0;6>c;c++){var q=4*c;var r=d[c];var u=vec3.dot(r,g[q])-vec3.dot(r,a);if(u/=vec3.dot(r,b)){vec3.add(vec3.scale(b,u,l),a);
vec3.subtract(l,g[q]);vec3.subtract(g[q+1],g[q],h);vec3.subtract(g[q+3],g[q],m);q=vec3.dot(h,h);u=vec3.dot(h,m);r=vec3.dot(h,l);var x=vec3.dot(m,m);var A=vec3.dot(m,l);var B=1/(q*x-u*u);x=(x*r-u*A)*B;q=(q*A-u*r)*B;if(0<x&&0<q&&1>x&&1>q)return!0}}return!1}};
extend(Cube,{vector:vec3.create(),draw:function(a,b,c){c=4*(576+48*(c||0));"c"!==a.lastDraw&&(a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.vertexAttribPointer(b.positionAttribute,3,a.FLOAT,!1,0,0),a.lastTexOffset=-1);a.lastTexOffset!==c&&(a.vertexAttribPointer(b.texCoordAttribute,2,a.FLOAT,!1,0,c),a.lastTexOffset=c);drawLines?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.lineIndexBuffer),a.drawElements(a.LINES,24,a.UNSIGNED_SHORT,0),a.lastDraw=
null):(a.drawElements(a.TRIANGLES,36,a.UNSIGNED_SHORT,0),a.lastDraw="c")},drawMultiple:function(a,b,c,d){var g=a.matrix,l=Element.shader;mat4.identity(g);mat4.translate(g,b);a.uniformMatrix4fv(l.mvMatrixUniform,!1,g);"c"!==a.lastDraw&&(a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.vertexAttribPointer(l.positionAttribute,3,a.FLOAT,!1,0,0),a.lastTexOffset=-1);3072!==a.lastTexOffset&&(a.vertexAttribPointer(l.texCoordAttribute,2,a.FLOAT,!1,0,
3072),a.lastTexOffset=3072);a.drawElements(a.TRIANGLES,36*c,a.UNSIGNED_SHORT,72*d);a.lastDraw="c"},drawDouble:function(a,b,c,d){var g=this.vector;drawBigCubes?(vec3.assign(g,1),g[d]=2+cubeSpacing,this.drawMulti(a,b)):(vec3.set(b,g),g[d]-=.5+.5*cubeSpacing,b=2*d+(c[d]>g[d]?0:1),this.drawMultiple(a,g,2,b))},drawQuad:function(a,b,c,d){var g=this.vector,l=(d+1)%3,h=(d+2)%3;drawBigCubes?(vec3.assign(g,2+cubeSpacing),g[d]=1,this.drawMulti(a,b)):(vec3.assign(g,-.5-.5*cubeSpacing),g[d]=0,vec3.add(g,b),b=
0===d?26:1===d?16:6,c[l]<g[l]&&(b+=5),c[h]<g[h]&&(b+=2),this.drawMultiple(a,g,4,b))},drawOct:function(a,b,c){var d=this.vector;drawBigCubes?(vec3.assign(this.vector,2+cubeSpacing),this.drawMulti(a,b)):(vec3.assign(d,-.5-.5*cubeSpacing),vec3.add(d,b),b=37,c[0]<d[0]&&(b+=12),c[1]<d[1]&&(b+=24),c[2]<d[2]&&(b+=4),this.drawMultiple(a,d,8,b))},drawHex:function(a,b,c){vec3.assign(this.vector,2+cubeSpacing);this.vector[c]=4+3*cubeSpacing;this.drawMulti(a,b)},draw32:function(a,b,c){vec3.assign(this.vector,
4+3*cubeSpacing);this.vector[c]=2+cubeSpacing;this.drawMulti(a,b)},draw64:function(a,b){vec3.assign(this.vector,4+3*cubeSpacing);this.drawMulti(a,b)},drawMulti:function(a,b){var c=a.matrix,d=Element.shader;mat4.identity(c);mat4.translate(c,b);mat4.scale(c,this.vector);a.uniformMatrix4fv(d.mvMatrixUniform,!1,c);this.draw(a,d,0)},initBuffers:function(a){var b=this.initVertices(),c=this.initTexCoords(),d=this.initIndices(),g=this.initLineIndices();this.initNormals();this.attributeBuffer=a.createBuffer();
a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer);a.bufferData(a.ARRAY_BUFFER,4*(b.length+c.length),a.STATIC_DRAW);a.bufferSubData(a.ARRAY_BUFFER,0,b);a.bufferSubData(a.ARRAY_BUFFER,4*b.length,c);this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,d,a.STATIC_DRAW);this.lineIndexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.lineIndexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,g,a.STATIC_DRAW)},initVertices:function(){var a;
var b=.5;var c=this.vertexVectors=[],d=new Float32Array([b,b,b,b,-b,b,b,-b,-b,b,b,-b,b,b,b,b,b,-b,-b,b,-b,-b,b,b,b,b,b,-b,b,b,-b,-b,b,b,-b,b,-b,b,b,-b,b,-b,-b,-b,-b,-b,-b,b,b,-b,b,-b,-b,b,-b,-b,-b,b,-b,-b,b,b,-b,b,-b,-b,-b,-b,-b,-b,b,-b]);b=2*b+cubeSpacing;var g=[[0,0,0],[b,0,0],[0,b,0],[b,b,0],[0,0,b],[b,0,b],[0,b,b],[b,b,b]];var l=new Float32Array(72*g.length);for(a=0;a<g.length;a++){var h=72*a;for(b=0;72>b;b++)l[h+b]=d[b]+g[a][b%3]}for(b=0;24>b;b++)a=3*b,c.push(vec3.assign(vec3.create(),d[a],d[a+
1],d[a+2]));return l},initNormals:function(){var a,b=this.normalVectors=[],c=new Float32Array([1,0,0,0,1,0,0,0,1,-1,0,0,0,-1,0,0,0,-1]);for(a=0;6>a;a++){var d=3*a;b.push(vec3.assign(vec3.create(),c[d],c[d+1],c[d+2]))}},initTexCoords:function(){function a(a,b,c,d){c*=.125;d*=.125;h.push(a+7*c,b+d,a+c,b+d,a+c,b+7*d,a+7*c,b+7*d)}var b=.25,c=.125,d,g,l,h=[];for(l=0;2>l;l++)for(g=5;8>g;g++)a(0,g*c,b,c);b=1/6;c=1/12;for(d=3;6>d;d++)for(l=0;2>l;l++)for(g=9;12>g;g++)a(d*b,g*c,b,c);b=new Float32Array(576);
for(d=0;192>d;d++)b[d]=h[d];for(d=0;48>d;d++)for(g=4;12>g;g++)b[d+48*g]=h[d];return b},initIndices:function(){var a,b,c=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];var d=[0,1,0,2,0,4,0,1,2,3,0,1,0,3,2,1,0,4,1,5,0,4,0,5,1,4,0,2,4,6,0,2,0,6,4,2,0,0,1,2,3,4,5,6,7,0,1,2,3,1,0,3,2,5,4,7,6,1,0,3,2,2,3,0,1,6,7,4,5,2,3,0,1,3,2,1,0,7,6,5,4,3,2,1,0];var g=new Uint16Array(36*d.length);for(b=0;b<d.length;b++){var l=36*b;for(a=0;36>a;a++)g[l+a]=c[a]+24*d[b]}return g},
initLineIndices:function(){return new Uint16Array([0,1,3,0,0,12,1,2,2,3,12,13,13,14,14,15,15,12,1,15,2,14,3,13])}});var Face={draw:function(a,b,c){c=4*(12+8*(c||0));"f"!==a.lastDraw&&(a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.vertexAttribPointer(b.positionAttribute,3,a.FLOAT,!1,0,0),a.lastTexOffset=-1);a.lastTexOffset!==c&&(a.vertexAttribPointer(b.texCoordAttribute,2,a.FLOAT,!1,0,c),a.lastTexOffset=c);a.drawElements(a.TRIANGLE_FAN,4,a.UNSIGNED_SHORT,0);a.lastDraw="f"},initBuffers:function(a){function b(a,b,c,d){h.push(a+c,b,a,b,a,b+d,a+c,b+d)}var c=
numberSize,d=.25,g=.125,l,h=[];this.vertices=new Float32Array([0,c,c,0,-c,c,0,-c,-c,0,c,-c]);b(3*d,0,d,g);for(c=0;3>c;c++)for(l=0;3>l;l++)b(l*d,c*g,d,g);d=.125;g=.0625;for(c=6;9>c;c++)for(l=0;6>l;l++)b(l*d,c*g,d,g);b(.75,0,.25,.125);h=new Float32Array(h);this.attributeBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer);a.bufferData(a.ARRAY_BUFFER,4*(this.vertices.length+h.length),a.STATIC_DRAW);a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);a.bufferSubData(a.ARRAY_BUFFER,4*
this.vertices.length,h);this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,3]),a.STATIC_DRAW)}};var Icosahedron={draw:function(a,b){a.enable(a.DEPTH_TEST);"i"!==a.lastDraw&&(a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.vertexAttribPointer(b.positionAttribute,3,a.FLOAT,!1,0,0),a.vertexAttribPointer(b.texCoordAttribute,2,a.FLOAT,!1,0,2160));drawLines?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.lineIndexBuffer),a.drawElements(a.LINES,360,a.UNSIGNED_SHORT,0)):a.drawElements(a.TRIANGLES,180,a.UNSIGNED_SHORT,0);a.lastDraw="i";a.disable(a.DEPTH_TEST)},
initBuffers:function(a){function b(a,b,c,d,h,l,m){var q,r=g;for(q=0;5>q;q++){var t=72*q+18*a;r[t]=r[t+6]=r[t+12]=b;r[t+1]=r[t+7]=r[t+13]=h+q*y;r[t+2]=r[t+16]=c;r[t+3]=r[t+17]=h+q*y;r[t+4]=r[t+8]=d;r[t+5]=r[t+9]=l+q*y;r[t+10]=r[t+14]=d;r[t+11]=r[t+15]=m+q*y}}var c,d,g=[],l=[],h=[],m=(1+Math.sqrt(5))/2;var q=vec3.create();var r=[[0,m,1],[0,-m,1],[0,-m,-1],[0,m,-1],[m,1,0],[-m,1,0],[-m,-1,0],[m,-1,0],[1,0,m],[1,0,-m],[-1,0,-m],[-1,0,m]];for(c=0;c<r.length;c++)vec3.scale(vec3.normalize(r[c]),mineSize);
var u=[0,3,5,10,5,3,5,10,6,2,6,10,0,5,11,6,11,5,11,6,1,2,1,6,0,11,8,1,8,11,8,1,7,2,7,1,0,8,4,7,4,8,4,7,9,2,9,7,0,4,3,9,3,4,3,9,10,2,10,9];m=new Float32Array(9*u.length);for(d=0;d<u.length;d+=3){var x=r[u[d]];var A=r[u[d+1]];var B=r[u[d+2]];vec3.add(vec3.add(x,A,q),B);vec3.scale(vec3.normalize(q),mineSpikyness*mineSize);for(c=0;3>c;c++){var t=9*d+c;m[t]=q[c];m[t+3]=x[c];m[t+6]=A[c];m[t+9]=q[c];m[t+12]=A[c];m[t+15]=B[c];m[t+18]=q[c];m[t+21]=B[c];m[t+24]=x[c]}}g=new Float32Array(6*u.length);var y=.25/
Math.sqrt(3)/4;q=Math.tan(Math.PI/6)/2*.25/4;b(0,.90625+q,.96875,.90625,.140625+.5*y,.140625,.140625+y);b(1,.90625-q,.84375,.90625,.140625+.5*y,.140625+y,.140625);b(2,.84375+q,.90625,.84375,.140625+y,.140625+.5*y,.140625+1.5*y);b(3,.84375-q,.78125,.84375,.140625+y,.140625+1.5*y,.140625+.5*y);for(c=0;180>c;c++)l.push(c),t=3*c,h.push(t,t+1,t+1,t+2,t+2,t);l=new Uint16Array(l);h=new Uint16Array(h);this.attributeBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();this.lineIndexBuffer=a.createBuffer();
a.bindBuffer(a.ARRAY_BUFFER,this.attributeBuffer);a.bufferData(a.ARRAY_BUFFER,4*(m.length+g.length),a.STATIC_DRAW);a.bufferSubData(a.ARRAY_BUFFER,0,m);a.bufferSubData(a.ARRAY_BUFFER,4*m.length,g);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,l,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.lineIndexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW)}};var Element=function(a,b){this.parent=null;this.index=a;this.position=b;this.matrix=mat4.translate(mat4.identity(mat4.create()),b);this.offset=vec3.create();this.vector=vec3.create();this.cube=new Cube(this);this.neighbors=[]};
Element.prototype={start:function(a){this.maxValue=0;this.isMine=!1;this.restart(a)},restart:function(a){var b=this.vector;this.value=this.maxValue;this.untouched=!0;this.moving=this.opening=this.highlight=this.flagged=!1;this.rotation=0;this.scale=1;this.changeState("cube");Settings.animations&&(vec3.zero(b),a&&vec3.subtract(a,this.position,b),this.scale=0,this.adjustState(),tween=new TWEEN.Tween(this),tween.to({scale:1},200),tween.easing(TWEEN.Easing.Back.EaseOut),tween.delay(vec3.length(b)*(70+
30*Math.random())),tween.onUpdate(Grid.forceRedraw),tween.onComplete(this.adjustState),tween.start())},changeState:function(a){this.state=a;this.adjustState()},adjustState:function(){var a=this.highlight||this.rotation||1!==this.scale||this.moving||this.flagged;this.untouched!==("cube"===this.state&&!a)&&(this.untouched=!this.untouched,this.parent&&(this.untouched?this.parent.untouch():this.parent.touch()))},draw:function(a){var b=Element.shader,c=this.state;this.untouched?(a.uniformMatrix4fv(b.mvMatrixUniform,
!1,this.matrix),Cube.draw(a,b,0)):"number"===c?this.drawNumber(a,b):"cube"===c?this.drawCube(a,b):"mine"===c&&this.drawMine(a,b)},drawCube:function(a,b){var c=b.alphaUniform,d=a.matrix,g=this.scale,l=this.flagged?1:0;g&&(1!==g?(mat4.identity(d),mat4.translate(d,this.position),mat4.scale(d,vec3.assign(Element.vector,g))):this.moving?(mat4.identity(d),mat4.translate(d,this.offset)):d=this.matrix,a.uniformMatrix4fv(b.mvMatrixUniform,!1,d),this.flagged&&this.opening&&(l=this.isMine?3:2),this.highlight?
(a.uniform1f(c,hoverAlpha),Cube.draw(a,b,l),a.uniform1f(c,mainAlpha)):Cube.draw(a,b,l))},drawNumber:function(a,b){var c=a.matrix,d=this.rotation,g=this.value;if(this.moving)mat4.identity(c),mat4.translate(c,this.offset);else if(d){var l=Camera.getRight();mat4.identity(c);mat4.translate(c,this.position);d<-Math.PI/2?(mat4.rotate(c,d+Math.PI,l),g++):mat4.rotate(c,d,l)}else c=this.matrix;a.uniformMatrix4fv(b.mvMatrixUniform,!1,c);g&&(invertedNumbers&&(g=27-g),Face.draw(a,b,g))},drawMine:function(a,b){var c=
a.matrix,d=b.mvMatrixUniform;this.moving?(mat4.identity(c),mat4.translate(c,this.offset)):c=this.matrix;useIcosahedron?(a.uniformMatrix4fv(d,!1,c),Icosahedron.draw(a,b)):(c=mat4.set(c,a.matrix),mat4.scale(c,vec3.assign(Cube.vector,mineSize/numberSize)),a.uniformMatrix4fv(d,!1,c),Face.draw(a,b,28))},addNeighbor:function(a,b){this.neighbors.push(a);b&&a.addNeighbor(this,!1)},increaseValue:function(){this.value++;this.maxValue++},decreaseValue:function(){this.value--;if(Settings.animations){this.rotation=
-Math.PI;var a=new TWEEN.Tween(this);a.to({rotation:0},250);a.onComplete(this.valueDecreased);a.start()}else this.valueDecreased()},valueDecreased:function(){0===this.value&&"cube"!==this.state&&this.open()},setMine:function(){this.isMine=!0;var a,b=this.neighbors;for(a=0;a<b.length;a++)b[a].increaseValue()},showMine:function(a,b){var c=this.vector,d=this;Settings.animations&&!a&&this.index!==b.index?(vec3.subtract(this.position,b.position,c),tween=new TWEEN.Tween(this),tween.to(null,0),tween.delay(50*
vec3.length(c)-50*Math.random()),vec3.normalize(c),vec3.scale(c,.5*(b.isMine?1:-1)),vec3.set(this.position,this.offset),tween.onComplete(function(){d.showMineNow();d.moveTo(c,150,TWEEN.Easing.Cubic.EaseOut,function(){d.moveTo(vec3.scale(c,-1),250,TWEEN.Easing.Cubic.EaseIn,function(){d.moving=!1;d.adjustState()})})}),tween.start()):this.showMineNow()},showMineNow:function(){"cube"===this.state&&(this.flagged?this.opening=!0:this.isMine&&this.changeState("mine"))},moveTo:function(a,b,c,d){var g=this.offset;
this.moving=!0;this.adjustState();tween=new TWEEN.Tween(g);tween.to({0:g[0]+a[0],1:g[1]+a[1],2:g[2]+a[2]},b);tween.easing(c);tween.onUpdate(Grid.forceRedraw);tween.onComplete(d);tween.start()},openCube:function(a){if("cube"===this.state&&!this.flagged&&!this.opening)if(this.opening=!0,Settings.animations){this.scale=.99;this.adjustState();var b=new TWEEN.Tween(this);b.to({scale:0},150);a||b.delay(100*Math.random());b.easing(TWEEN.Easing.Quadratic.EaseOut);b.onUpdate(Grid.forceRedraw);b.onComplete(this.openCubeNow);
b.start()}else this.openCubeNow()},openCubeNow:function(){this.scale=1;this.isMine?Game.over(!1,this):this.open()},open:function(){"open"!==this.state&&("cube"===this.state&&Grid.cubeCount--,this.value?this.changeState("number"):(this.changeState("open"),BSPTree.remove(this),Grid.remove(this),this.openNeighbors(),Camera.recenter=!0))},openMine:function(){if("cube"===this.state)if(Settings.animations){this.flagged=!0;this.adjustState();var a=new TWEEN.Tween(this);a.to({scale:0},200);a.onUpdate(Grid.forceRedraw);
a.onComplete(this.openMineNow);a.start()}else this.openMineNow()},openMineNow:function(){var a;this.scale=1;if("cube"===this.state)if(this.open(),this.isMine){var b=this.neighbors;for(a=0;a<b.length;a++)b[a].decreaseValue();Grid.minesLeft--;Menu.setMines(Grid.minesLeft)}else Game.over(!1,this)},openNeighbors:function(){var a,b=this.neighbors;for(a=0;a<b.length;a++)b[a].openCube()},flag:function(){this.flagged=!this.flagged;this.adjustState();Grid.minesLeft+=this.flagged?-1:1;Menu.setMines(Grid.minesLeft)},
remove:function(a){if(this.index===a.index)return 0;throw"wtf";},count:function(){return 1},getCenter:function(a,b){var c,d=this.position;for(c=0;3>c;c++)a[c]=d[c]>a[c]?d[c]:a[c],b[c]=d[c]<b[c]?d[c]:b[c]},getVisionSize:function(a,b){return vec3.lengthSquared(vec3.subtract(this.position,a,b))},solve:function(){"cube"!==this.state||this.isMine||(this.value?this.changeState("number"):(BSPTree.remove(this),Grid.remove(this),this.changeState("open")),Grid.cubeCount--)},print:function(a){console.log(a+
"  "+this.untouched)}};
extend(Element,{vector:vec3.create(),init:function(a){this.initShader(a);this.initTextures(a);Cube.initBuffers(a);Face.initBuffers(a);Icosahedron.initBuffers(a);this.updateMatrix(a);a.uniform1f(this.shader.alphaUniform,mainAlpha)},updateMatrix:function(a){mat4.multiply(Camera.getPMatrix(),Camera.getMvMatrix(),a.matrix);a.uniformMatrix4fv(Element.shader.pMatrixUniform,!1,a.matrix);mat4.identity(a.matrix)},initShader:function(a){var b=a.loadShader("vertex-shader","fragment-shader");a.useProgram(b);
b.mvMatrixUniform=a.getUniformLocation(b,"uMVMatrix");b.pMatrixUniform=a.getUniformLocation(b,"uPMatrix");b.textureUniform=a.getUniformLocation(b,"uTexture");b.alphaUniform=a.getUniformLocation(b,"uAlpha");b.positionAttribute=a.getAttribLocation(b,"aPosition");a.enableVertexAttribArray(b.positionAttribute);b.texCoordAttribute=a.getAttribLocation(b,"aTextureCoord");a.enableVertexAttribArray(b.texCoordAttribute);this.shader=b},initTextures:function(a){this.texture=a.loadTexture(texturePath,useTextureFiltering,
function(a,c){a.passTexture(c,Element.shader.textureUniform);Grid.redraw=!0})}});var BSPNode=function(a){this.parent=a;this.direction=this.position=this.back=this.front=null;this.untouched=!0;this.numChildren=0};
BSPNode.prototype={init:function(a,b){var c;this.direction=b;this.numChildren=multipleOfTwo(a.length);this.position=this.getAveragePosition(a,b);var d=[];for(c=[];a.length;){var g=a.pop();var l=g.position;l[b]<this.position[b]?c.push(g):d.push(g)}b=(b+1)%3;d.length?c.length?(1===d.length?(this.front=d[0],this.front.parent=this):this.front=(new BSPNode(this)).init(d,b),1===c.length?(this.back=c[0],this.back.parent=this):this.back=(new BSPNode(this)).init(c,b)):this.init(d,b):this.init(c,b);b=this.direction;
4===this.numChildren?b===this.front.direction&&(this.numChildren=0):8===this.numChildren&&(d=this.front.direction,c=this.front.front.direction,3!==b+d+c||d===c)&&(this.numChildren=0);if(drawBigCubes&&64<this.numChildren||!drawBigCubes&&8<this.numChildren)this.numChildren=0;return this},getAveragePosition:function(a,b){var c=vec3.zero(vec3.create()),d=0,g;for(g=0;g<a.length;g++)vec3.add(c,a[g].position),d++;vec3.scale(c,1/d);for(g=0;g<a.length;g++)if(d=a[g].position,c[b]+.3>d[b]&&c[b]-.3<d[b]){c[b]+=
.5<Math.random()?.5:-.5;break}return c},draw:function(a,b){var c=this.numChildren,d=this.position,g=this.direction;c&&this.untouched&&(drawLines?drawBigCubes:1)?2===c?Cube.drawDouble(a,d,b,g):4===c?Cube.drawQuad(a,d,b,2*(g+this.front.direction)%3):8===c?Cube.drawOct(a,d,b):drawBigCubes&&(16===c?Cube.drawHex(a,d,g):32===c?Cube.draw32(a,d,2*(g+this.front.direction)%3):Cube.draw64(a,d)):b[g]>d[g]?(this.back.draw(a,b),this.front.draw(a,b)):(this.front.draw(a,b),this.back.draw(a,b))},remove:function(a){var b=
this.direction;if(a.position[b]>this.position[b]){if(this.front=this.front.remove(a),!this.front)return this.parent&&(this.parent.untouched=!1,this.parent.numChildren=0),this.back}else if(this.back=this.back.remove(a),!this.back)return this.parent&&(this.parent.untouched=!1,this.parent.numChildren=0),this.front;return this},count:function(){return this.front.count()+this.back.count()},getCenter:function(a,b){this.front.getCenter(a,b);this.back.getCenter(a,b)},getVisionSize:function(a,b){var c=this.front.getVisionSize(a,
b),d=this.back.getVisionSize(a,b);return c<d?d:c},solve:function(){this.front.solve();this.back.solve()},print:function(a){a+="  ";console.log(a+this.direction);this.front.print(a);this.back.print(a)},touch:function(){this.untouched&&(this.untouched=!1,this.parent&&this.parent.touch())},untouch:function(){!this.untouched&&this.numChildren&&this.front.untouched&&this.back.untouched&&(this.untouched=!0,this.parent&&this.parent.untouch())}};var BSPTree={root:null,highVector:vec3.create(),lowVector:vec3.create(),createPartition:function(a){1<a.length?this.root=(new BSPNode(null)).init(a,0):1===a.length&&(this.root=a[0])},draw:function(a,b){this.root&&this.root.draw(a,b)},remove:function(a){this.root&&(this.root=this.root.remove(a))},count:function(){return this.root?this.root.count():0},getCenterAndVisionSize:function(a){return this.root?(vec3.assign(this.highVector,-Infinity),vec3.assign(this.lowVector,Infinity),this.root.getCenter(this.highVector,
this.lowVector),vec3.add(this.highVector,this.lowVector,a),vec3.scale(a,.5),Math.sqrt(this.root.getVisionSize(a,this.highVector))):0},solve:function(){this.root&&this.root.solve()},print:function(){this.root.print("")}};var Level=function(a,b,c){this.name=a;this.dimensions=vec3.assign(vec3.create(),b);this.mines=c},Settings={levels:{easy:new Level("easy",5,10),medium:new Level("medium",7,33),hard:new Level("hard",10,99),custom:new Level("custom",3,3)},currentLevel:null,mode:"sweep",animations:!0,recenter:!0,init:function(){var a=parseFloat;window.grid?(grid=grid.split(","),this.setCustom(a(grid[0]),a(grid[1]),a(grid[2]),a(grid[3]))):this.currentLevel||(this.currentLevel=this.levels.easy)},getKey:function(){return this.mode+
this.currentLevel.name},setFromMenu:function(){this.currentLevel=Menu.level;this.mode=Menu.mode;this.animations=Menu.animations;this.recenter=Menu.recenter},setCustom:function(a,b,c,d){var g=this.levels.custom,l=0;a=clamp(a,1,maxCubes);b=clamp(b,1,maxCubes);for(c=clamp(c,1,maxCubes);a*b*c>maxCubes;){switch(l%3){case 0:a=Math.floor(.9*a);break;case 1:b=Math.floor(.9*b);break;case 2:c=Math.floor(.9*c)}l++}d=clamp(d,0,a*b*c*.9);vec3.assign(g.dimensions,a,b,c);g.mines=d;this.currentLevel=g;Menu.setLevel("custom");
Menu.updateCustom(this.currentLevel)}};var Stats={storage:null,init:function(){this.storage=window.localStorage||{storage:{},setItem:function(a,b){this.storage[a]=b.toString()},getItem:function(a){return this.storage[a]},clear:function(){this.storage={}}}},read:function(a){return parseInt(this.storage.getItem(a))||0},write:function(a,b){this.storage.setItem(a,b)},clear:function(){this.storage.clear()},updateScore:function(a,b){var c=this.read(a);return!c||b<c?(this.write(a,b),!0):!1},updateStats:function(a,b){b&&this.write("gamesWon",
this.read("gamesWon")+1);this.write("gamesPlayed",this.read("gamesPlayed")+1);this.write("timePlayed",this.read("timePlayed")+a)},saveSettings:function(){var a=Settings.currentLevel.name;"custom"===a&&(a="easy");this.storage.setItem("settings",!0);this.storage.setItem("level",a);this.storage.setItem("mode",Settings.mode);this.storage.setItem("animations",Settings.animations);this.storage.setItem("recenter",Settings.recenter)},loadSettings:function(){this.storage.getItem("settings")&&(Settings.currentLevel=
Settings.levels[this.storage.getItem("level")],Settings.mode=this.storage.getItem("mode"),Settings.animations="true"===this.storage.getItem("animations"),Settings.recenter="true"===this.storage.getItem("recenter"))}};var Menu={mode:null,level:null,customDimensions:vec3.create(),customMines:0,animations:!1,recenter:!1,resize:!1,pageNames:["about","settings","stats","instructions","controls"],levelNames:"classiceasy sweepeasy classicmedium sweepmedium classichard sweephard".split(" "),fsm:null,secrets:{classiceasy:["mainAlpha=0.3&hoverAlpha=1","grid=30,16,1,99"],sweepeasy:["backgroundColor=0x672824","cubeSpacing=0.5","numberSize=0.4"],classicmedium:["controlSpeed=5"],sweepmedium:["invertedControls=1","invertedNumbers=1"],
classichard:["drawBigCubes=1"],sweephard:["drawLines=1"]},secretCounter:Math.floor(100*Math.random()),init:function(){function a(a,b){$("#"+a+"Button").toggleClass("active");$("#"+a).toggle();$("#"+b+"Button").removeClass("active");$("#"+b).hide()}this.fsm=new StateMachine(this);this.fsm.init({initial:"init",states:[{name:"init"},{name:"welcome",enter:this.enterWelcome,exit:this.exitWelcome},{name:"level",enter:this.enterLevel,exit:this.exitLevel},{name:"play"},{name:"menu",enter:this.enterMenu,exit:this.exitMenu},
{name:"gameover",enter:this.enterGameOver,exit:this.exitGameOver}],transitions:[{name:"play",from:"*",to:"play",callback:this.onPlay},{name:"win",from:"play",to:"gameover",callback:this.onWin},{name:"lose",from:"play",to:"gameover",callback:this.onLose}]});$(".newButton").click(function(){Game.start();Menu.fsm.changeState("play")});$("#menuButton").click(function(){Menu.toggle()});$("#restartButton").click(function(){Game.restart();Menu.fsm.changeState("play")});$("#shareButton").click(function(){a("share",
"feedback")});$("#feedbackButton").click(function(){a("feedback","share")});$("#playClassicButton").click(function(){Menu.setMode("classic");Menu.fsm.changeState("level")});$("#playSweepButton").click(function(){Menu.setMode("sweep");Menu.fsm.changeState("level")});$("#cancel").click(function(){Menu.fsm.changeState("welcome")});$("#ok").click(function(){Menu.fsm.play()});this.initMenu();this.initSettings();this.initStats();$(".button").disableSelection();var b;for(b=0;4>b;b++)$(".customUp"+b).disableSelection(),
$(".customDown"+b).disableSelection()},initMenu:function(){function a(a){return function(){Menu.hidePages();$("#"+a+"Button").addClass("active");$("#"+a).show()}}var b=this.pageNames,c;for(c=0;c<b.length;c++)$("#"+b[c]+"Button").click(a(b[c]))},initSettings:function(){function a(a,c){c!==Menu[a]&&($("#"+a+"On").toggleClass("active"),$("#"+a+"Off").toggleClass("active"),Menu[a]=c,Menu.changedSettings(!1))}$("#classic").click(function(){Menu.setMode("classic")});$("#sweep").click(function(){Menu.setMode("sweep")});
$(".easy").click(function(){Menu.setLevel("easy")});$(".medium").click(function(){Menu.setLevel("medium")});$(".hard").click(function(){Menu.setLevel("hard")});$(".custom").click(function(){Menu.setLevel("custom")});$("#animationsOn").click(function(){a("animations",!0)});$("#animationsOff").click(function(){a("animations",!1)});$("#recenterOn").click(function(){a("recenter",!0)});$("#recenterOff").click(function(){a("recenter",!1)});$("#apply").click(function(){Menu.fsm.changeState("play");Menu.applyChanges()});
this.setMode(Settings.mode);this.setLevel(Settings.currentLevel.name);this.animations=Settings.animations;this.recenter=Settings.recenter;$("#animations"+(Settings.animations?"On":"Off")).addClass("active");$("#recenter"+(Settings.recenter?"On":"Off")).addClass("active")},initStats:function(){function a(){$("#clearButton").toggleClass("active");$("#clearPrompt").toggle()}$("#clearButton").click(a);$("#clearNowButton").click(function(){a();Stats.clear();Menu.loadStats()});Menu.loadStats()},loadStats:function(){var a=
this.levelNames,b;for(b=0;b<a.length;b++)this.showScore(a[b]);this.updateStats()},showScore:function(a){var b=Stats.read(a);$("#"+a).text(Math.floor(.001*b)||"-")},updateEndScreenTimes:function(){var a=Stats.read(Settings.getKey());$(".gameTime").text(Math.floor(.001*Grid.playTime));$(".bestTime").text(Math.floor(.001*a)||"-")},updateStats:function(){$("#gamesWon").text(Stats.read("gamesWon")||0);$("#gamesPlayed").text(Stats.read("gamesPlayed")||0);$("#timePlayed").text(Math.floor(.001*Stats.read("timePlayed"))||
0)},setMode:function(a){$("#classic").removeClass("active");$("#sweep").removeClass("active");$("#"+a).addClass("active");this.mode!==a&&this.changedSettings(!1);this.mode=a},setLevel:function(a){$(".easy").removeClass("active");$(".medium").removeClass("active");$(".hard").removeClass("active");$(".custom").removeClass("active");$("."+a).addClass("active");this.toggleCustom();this.level!==Settings.levels[a]&&this.changedSettings(!0);this.level=Settings.levels[a];"custom"!==a&&this.updateCustom(this.level)},
setTime:function(a){$("#time").text(Math.floor(.001*a))},setMines:function(a){a=0>a?0:a;$("#mines").text(a)},reset:function(a,b){this.setTime(a);this.setMines(b);$("#winner").hide();$("#loser").hide()},show:function(){$("#menu").show();$("#menuButton").addClass("active")},hide:function(){$("#menu").hide();$("#menuButton").removeClass("active");this.hidePages()},toggle:function(){this.fsm.hasState("menu")?this.fsm.changeState("play"):this.fsm.changeState("menu")},hidePages:function(){var a=this.pageNames,
b;for(b=0;b<a.length;b++)$("#"+a[b]).hide(),$("#"+a[b]+"Button").removeClass("active");$("#newButton").removeClass("active")},showHUD:function(){$("#newButton").show();$("#menuButton").show();$("#shareButton").show();$("#feedbackButton").show();$("#timeDisplay").show();$("#mineDisplay").show();$("#overlay").click(function(){Menu.fsm.changeState("play")});EventHandler.bind()},enterWelcome:function(){$("#overlay").show();$("#welcome").show()},exitWelcome:function(){$("#welcome").hide()},enterLevel:function(){$("#levelPanel").show()},
exitLevel:function(){$("#levelPanel").hide();Stats.write("hideWelcomeScreen",$("#welcomeCheckbox").attr("checked")?1:0)},onPlay:function(){this.overlayOut();this.showHUD();this.applyChanges()},enterMenu:function(){this.show();this.overlayIn();$("#settingsButton").trigger("click")},exitMenu:function(){this.overlayOut();this.hide()},onLose:function(){this.updateEndScreenTimes();$("#loser").show()},onWin:function(){var a=Settings.getKey();$("#newBest").hide();$("#secret").hide();if("custom"!==Settings.currentLevel.name){var b=
this.secrets[a];b="?"+b[this.secretCounter%b.length];this.secretCounter++;$("#secretUrl").attr("href",b).text(b);$("#secret").show();Stats.updateScore(a,Grid.playTime)&&(this.showScore(a),$("#newBest").show())}this.updateEndScreenTimes();$("#winner").show()},enterGameOver:function(){this.overlayIn()},exitGameOver:function(){$("#winner").hide();$("#loser").hide();this.overlayOut()},changedSettings:function(a){a&&(this.resize=!0);$("#apply").show()},applyChanges:function(){"custom"===this.level.name&&
(vec3.set(this.customDimensions,this.level.dimensions),this.level.mines=this.customMines);Settings.setFromMenu();Stats.saveSettings();Game.start(this.resize);$("#apply").hide();this.resize=!1},overlayIn:function(){$("#overlay").stop();$("#overlay").css("z-index",1);$("#overlay").fadeTo(500,.7,function(){})},overlayOut:function(){$("#overlay").fadeTo(100,0,function(){$("#overlay").css("z-index",-1)})},updateCustom:function(a){vec3.set(a.dimensions,this.customDimensions);this.customMines=a.mines;$(".custom0").text(a.dimensions[0]);
$(".custom1").text(a.dimensions[1]);$(".custom2").text(a.dimensions[2]);$(".custom3").text(a.mines)},checkCustomButtons:function(){var a=this.customDimensions,b=[(a[0]+1)*a[1]*a[2],a[0]*(a[1]+1)*a[2],a[0]*a[1]*(a[2]+1),Math.floor(a[0]*a[1]*a[2]*.8)],c;for(c=0;4>c;c++)(3===c?this.customMines>=b[c]:b[c]>maxCubes)?this.disableCustomButton(c,!0):$(".customUp"+c).hasClass("disabled")&&this.enableCustomButton(c,!0),(3===c?1>this.customMines:1>=a[c])?this.disableCustomButton(c,!1):$(".customDown"+c).hasClass("disabled")&&
this.enableCustomButton(c,!1);b[3]<this.customMines&&(this.customMines=b[3],$(".custom3").text(b[3]))},enableCustomButton:function(a,b){var c=".custom"+(b?"Up":"Down")+a;$(c).removeClass("disabled");$(c).click(function(){var c=3===a?b?++Menu.customMines:--Menu.customMines:b?++Menu.customDimensions[a]:--Menu.customDimensions[a];$(".custom"+a).text(c);Menu.checkCustomButtons();Menu.changedSettings(!0)})},disableCustomButton:function(a,b){var c=".custom"+(b?"Up":"Down")+a;$(c).addClass("disabled");$(c).unbind("click")},
toggleCustom:function(){var a;if($(".custom").hasClass("active"))this.checkCustomButtons();else for(a=0;4>a;a++)this.disableCustomButton(a,!0),this.disableCustomButton(a,!1)}};var Grid={elements:[],elementList:[],cubeCount:0,minesLeft:0,minesSet:!1,started:!1,leftClicked:!1,rightClicked:!1,redraw:!0,time:0,playTime:0,init:function(){this.elements=[];this.createGrid();this.setNeighbors();this.start()},reset:function(a){var b,c=this.elements;TWEEN.removeAll();BSPTree.createPartition(c.concat());this.elementList=c.concat();this.cubeCount=c.length;var d=c[Math.floor(Math.random()*c.length)].position;for(b=0;b<c.length;b++)a.call(c[b],d);this.redraw=!0;this.started=this.minesSet=
!1;this.minesLeft=Settings.currentLevel.mines;this.leftClicked=this.rightClicked=!1;this.elementInRay=null;this.playTime=0;Menu.reset(0,this.minesLeft)},start:function(){this.reset(Element.prototype.start)},restart:function(){this.reset(Element.prototype.restart);this.minesSet=!0},createGrid:function(){var a=this.elements,b,c,d,g=1+cubeSpacing,l=vec3.create(),h=Settings.currentLevel.dimensions,m=0;l[2]=(h[2]-1)*g/-2;for(b=0;b<h[2];b++){l[1]=(h[1]-1)*g/-2;for(c=0;c<h[1];c++){l[0]=(h[0]-1)*g/-2;for(d=
0;d<h[0];d++)a.push(new Element(m,vec3.create(l))),m++,l[0]+=g;l[1]+=g}l[2]+=g}},setNeighbors:function(){var a=0,b=this.elements,c=!0,d,g,l,h=Settings.currentLevel.dimensions;for(d=h[2]-1;0<=d;d--){var m=0===d;var q=!0;for(g=h[1]-1;0<=g;g--){var r=0===g;for(l=h[0]-1;0<=l;l--){var u=0===l;var x=b[a];u||(x.addNeighbor(b[a+1],!0),r||(x.addNeighbor(b[a+1+h[0]],!0),c||x.addNeighbor(b[a+1+h[0]-h[0]*h[1]],!0)),q||(x.addNeighbor(b[a+1-h[0]],!0),c||x.addNeighbor(b[a+1-h[0]-h[0]*h[1]],!0)),c||x.addNeighbor(b[a+
1-h[0]*h[1]],!0));r||(x.addNeighbor(b[a+h[0]],!0),c||x.addNeighbor(b[a+h[0]-h[0]*h[1]],!0));m||(x.addNeighbor(b[a+h[0]*h[1]],!0),u||(x.addNeighbor(b[a+1+h[0]*h[1]],!0),r||x.addNeighbor(b[a+1+h[0]+h[0]*h[1]],!0),q||x.addNeighbor(b[a+1-h[0]+h[0]*h[1]],!0)),r||x.addNeighbor(b[a+h[0]+h[0]*h[1]],!0));a++}q=!1}c=!1}},setMines:function(a){var b=a.neighbors;var c=Settings.currentLevel.dimensions,c=c[0]*c[1]*c[2],d=Settings.currentLevel.mines,g=[],l=this.elements;g.push(a.index);for(a=0;a<b.length;a++)g.push(b[a].index);
c-g.length<d&&(d=Math.floor(.9*(c-g.length)),Settings.currentLevel.mines=this.minesLeft=d,Menu.reset(0,d));a:for(;d;){b=Math.floor(Math.random()*c);for(a=0;a<g.length;a++)if(g[a]===b)continue a;a=l[b];a.isMine||(a.setMine(),d--)}this.minesSet=!0},showMines:function(a,b){var c,d=this.elementList;for(c=0;c<d.length;c++)d[c].showMine(a,b);this.redraw=!0},update:function(){var a=this.elementInRay;a&&(this.leftClicked?(this.started||(this.minesSet||(this.setMines(a),a.openNeighbors()),this.time=(new Date).getTime(),
this.started=!0),a.openCube(!0),this.redraw=!0):this.rightClicked&&this.started&&("classic"===Settings.mode?a.flag():a.openMine(),this.redraw=!0));this.leftClicked=this.rightClicked=!1;if(this.started&&!Game.gameover){var b=this.playTime;a=(new Date).getTime();var c=a-this.time;c=500<c?100:c;b%1E3<(b+c)%1E3&&Menu.setTime(b+c);this.playTime+=c;this.time=a;("classic"===Settings.mode&&this.cubeCount===Settings.currentLevel.mines||"sweep"===Settings.mode&&this.cubeCount===this.minesLeft)&&Game.over(!0)}return this.redraw},
draw:function(a){a.lastDraw=null;BSPTree.draw(a,Camera.getPosition());this.redraw=!1},elementInRay:null,getCubeInRay:function(a){var b=Infinity,c=this.elementList,d=null,g=vec3.create(),l=a.origin,h=a.direction;for(a=0;a<c.length;a++){var m=c[a];if("cube"===m.state){vec3.subtract(m.position,l,g);var q=vec3.lengthSquared(g);if(q<b){var r=m.cube;var u=r.distanceToRay(l,h);.75<u||!(.25>u||r.intersectsRay(l,h))||(d=m,b=q)}}}this.setElementInRay(d)},setElementInRay:function(a){var b=this.elementInRay;
if(!b||!a||b.index!==a.index)if(b&&(b.highlight=!1,b.adjustState(),this.redraw=!0),this.elementInRay=a)a.highlight=!0,a.adjustState(),this.redraw=!0},remove:function(a){for(var b=Math.min(a.index,this.elementList.length-1);a.index!==this.elementList[b].index;)if(b--,0>b)throw"wtf";this.elementList.splice(b,1)},forceRedraw:function(){Grid.redraw=!0}};var Camera=new function(){function a(a,b){return vec3.assign(b,(a[0]-.5*width)/u,(.5*height-a[1])/u,0)}function b(b,c){var l=a(b,v),m=vec3.length(l);1<m?vec3.normalize(l):l[2]=Math.sqrt(1-m*m);vec3.scale(vec3.normalize(d,c),l[2]);vec3.add(c,vec3.scale(h,l[0],E));vec3.add(c,vec3.scale(g,l[1],E));return c}function c(a,b){mat4.multiplyVec4(b,a);a[0]/=a[3];a[1]/=a[3];a[2]/=a[3]}var d=vec3.create(),g=vec3.create(),l=vec3.create(),h=vec3.create(),m=vec3.create(),q=mat4.create(),r=mat4.create(),u=0,x=1,
A=vec3.create(),B=vec3.create(),t={origin:null,direction:null},y=new glMatrixArrayType(4),F=new glMatrixArrayType(4),L=!1,J=!1,K=!1,I=!1,v=vec3.create(),E=vec3.create(),H=mat4.create(),D=null;this.recenter=!1;this.updateRotation=this.updateRay=!0;this.init=function(){vec3.assign(d,100);vec3.assign(g,0,0,1);vec3.zero(l);vec3.zero(m);vec3.normalize(vec3.cross(g,d,h));vec3.normalize(vec3.cross(d,h,g));D=EventHandler.mouse;this.resize()};this.resize=function(){mat4.perspective(45,width/height,.1,1E3,
q);u=(width+height)/4};this.update=function(){var c=L||J||K;if(I)return L?b(D,A):K?x=1:J&&a(D,A),I=!1,!0;if(!c&&this.recenter&&Settings.recenter&&"up"===EventHandler.state)return this.recenterView(Settings.animations);L&&(this.rotateCamera(),this.updateRotation=!0);K&&this.zoomCamera();J&&this.panCamera();L=J=K=!1;return c};this.reset=function(){vec3.scale(d,1E3);vec3.normalize(vec3.cross(g,d,h));vec3.normalize(vec3.cross(d,h,g));vec3.zero(m);this.updateFaceDirections(gl,Face.vertices,Face.attributeBuffer);
this.recenterView(!1)};this.getPMatrix=function(){return q};this.getMvMatrix=function(){mat4.lookAt(this.getPosition(),vec3.add(l,m,E),g,r);return r};this.getEye=function(){return d};this.getUp=function(){return g};this.getRight=function(){return h};this.getPosition=function(){return vec3.add(vec3.add(l,m,v),d)};this.startRotate=function(a){b(a,A)};this.rotate=function(){L=!0};this.rotateCamera=function(){b(D,B);var a=vec3.angle(A,B);invertedControls&&(a*=-1);if(a*=controlSpeed){var c=vec3.cross(B,
A,v);mat4.identity(H);mat4.rotate(H,a,c);mat4.multiplyVec3(H,d);mat4.multiplyVec3(H,g);mat4.multiplyVec3(H,h);mat4.multiplyVec3(H,B);vec3.set(B,A)}};this.startPan=function(b){a(b,A)};this.pan=function(){J=!0};this.panCamera=function(){var b=E,c=.3*controlSpeed;invertedControls&&(c*=-1);a(D,B);vec3.subtract(A,B,v);vec3.lengthSquared(v)&&(vec3.scale(v,vec3.length(d)*c),vec3.scale(h,v[0],b),vec3.add(b,vec3.scale(g,v[1],v)),vec3.add(m,b),vec3.set(B,A))};this.zoom=function(a){K=!0;invertedControls&&(a=
1/a);a=Math.pow(a,controlSpeed);x*=a};this.zoomCamera=function(){var a=vec3.length(d);vec3.scale(vec3.normalize(d),a*x);a=vec3.lengthSquared(d);1E4<a?vec3.scale(vec3.normalize(d),100):.09>a&&vec3.scale(vec3.normalize(d),.3);x=1};this.getMouseRay=function(){mat4.multiply(q,r,H);mat4.inverse(H);y[0]=F[0]=D[0]/width*2-1;y[1]=F[1]=D[1]/height*-2+1;y[2]=0;F[2]=1;y[3]=F[3]=1;c(y,H);c(F,H);t.origin=y;t.direction=vec3.direction(F,y,F);this.updateRay=!1;return t};this.updateFaceDirections=function(a,b,c){vec3.add(g,
h,v);vec3.normalize(v);vec3.scale(v,Math.sqrt(numberSize));b[0]=v[0];b[1]=v[1];b[2]=v[2];b[6]=-v[0];b[7]=-v[1];b[8]=-v[2];mat4.identity(H);mat4.rotate(H,Math.PI/2,d);mat4.multiplyVec3(H,v);b[3]=v[0];b[4]=v[1];b[5]=v[2];b[9]=-v[0];b[10]=-v[1];b[11]=-v[2];a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferSubData(a.ARRAY_BUFFER,0,b);this.updateRotation=!1};this.recenterView=function(a){var b=BSPTree.getCenterAndVisionSize(v),b=(b+(1*b+2))/vec3.length(d);this.recenter=!1;return 0<b&&.99>b?(vec3.set(d,E),vec3.scale(E,
b),64>vec3.lengthSquared(E)&&vec3.scale(vec3.normalize(E),8),a?(a=new TWEEN.Tween(l),b=new TWEEN.Tween(d),a.to({0:v[0],1:v[1],2:v[2]},400),b.to({0:E[0],1:E[1],2:E[2]},400),a.onUpdate(function(){I=!0}),a.onComplete(function(){Camera.updateRay=!0}),a.easing(TWEEN.Easing.Quadratic.EaseInOut),b.easing(TWEEN.Easing.Quadratic.EaseInOut),a.start(),b.start()):(vec3.set(v,l),vec3.set(E,d)),I=!0):!1};return this};var EventHandler={mouse:vec3.create(),oldMouse:vec3.create(),vector:vec3.create(),state:"up",button:0,timeoutID:null,init:function(){window.addEventListener("resize",bind(this,this.onResize),!1);vec3.zero(this.oldMouse);vec3.zero(this.mouse)},bind:function(){canvas.addEventListener("mousemove",bind(this,this.onMouseMove),!1);canvas.addEventListener("mousedown",bind(this,this.onMouseDown),!1);canvas.addEventListener("mouseup",bind(this,this.onMouseUp),!1);document.addEventListener("DOMMouseScroll",
bind(this,this.onScroll),!1);document.addEventListener("mousewheel",bind(this,this.onScroll),!1);document.addEventListener("keydown",bind(this,this.onKeyDown),!1);document.addEventListener("keyup",bind(this,this.onKeyUp),!1);canvas.addEventListener("contextmenu",function(a){a.preventDefault()},!1);canvas.onselectstart=function(){return!1}},getMouse:function(a,b){b[0]=a.clientX;b[1]=a.clientY;return b},onMouseDown:function(a){a.stopPropagation();canvas.setCapture();this.state="down";this.button=a.button;
invertedControls&&(this.button=(this.button+2)%4);a=this.getMouse(a,this.oldMouse);0===this.button?Camera.startRotate(a):2===this.button&&Camera.startPan(a);this.timeoutID=setTimeout(bind(this,this.onClickTimeout),250)},onMouseUp:function(a){a.stopPropagation();document.releaseCapture();"down"===this.state&&(this.onClick(a),clearTimeout(this.timeoutID));this.state="up";Camera.updateRay=!0},onMouseMove:function(a){a.stopPropagation();a=this.getMouse(a,this.mouse);"down"===this.state&&(a=vec3.lengthSquared(vec3.subtract(a,
this.oldMouse,this.vector)),60<a&&(this.state="drag",clearTimeout(this.timeoutID)));"drag"===this.state?0===this.button?Camera.rotate():2===this.button&&Camera.pan():Camera.updateRay=!0},onClick:function(){0===this.button?Grid.leftClicked=!0:1===this.button?Camera.reset():2===this.button&&(Grid.rightClicked=!0)},onClickTimeout:function(){"down"===this.state&&(this.state="drag")},onScroll:function(a){a.stopPropagation();Menu.fsm.hasState("play")&&(a.preventDefault(),a=a.wheelDelta||-5*a.detail,Camera.zoom(1-
2E-4*a))},isMouseKey:function(a){return this.isLeftMouseKey(a)||this.isRightMouseKey(a)},isLeftMouseKey:function(a){return 70===a||74===a},isRightMouseKey:function(a){return 68===a||75===a},augmentEvent:function(a){a.clientX=this.mouse[0];a.clientY=this.mouse[1];a.button=this.isLeftMouseKey(a.keyCode)?0:2;return a},onKeyDown:function(a){if("up"===this.state&&this.isMouseKey(a.keyCode)&&Menu.fsm.hasState("play"))this.onMouseDown(this.augmentEvent(a))},onKeyUp:function(a){if(32===a.keyCode)Game.start(),
Menu.fsm.changeState("play");else if(27===a.keyCode)Menu.toggle();else if(Menu.fsm.hasState("play"))if(this.isMouseKey(a.keyCode))this.onMouseUp(this.augmentEvent(a));else 82===a.keyCode?Camera.reset():73===a.keyCode?stats.toggle():79===a.keyCode&&stats.switchMode()},onResize:function(a){setViewport();Camera.resize();Element.updateMatrix(gl);useBackgroundTextures&&Background.resize();Grid.redraw=!0;requestAnimationFrame(function(){Grid.redraw=!0})}};var Game={gameover:!1,init:function(a){Camera.init();Element.init(a);Grid.init();useBackgroundTextures&&Background.init(a);this.reset()},draw:function(a){var b=!1;Settings.animations&&TWEEN.getAll().length&&((Grid.leftClicked||Grid.rightClicked)&&TWEEN.completeAll(),TWEEN.update(),b=!0);this.gameover&&(Grid.leftClicked=Grid.rightClicked=!1);Grid.update();Camera.update()&&(Element.updateMatrix(a),Camera.updateRotation&&(Camera.updateFaceDirections(a,Face.vertices,Face.attributeBuffer),Grid.setElementInRay(null)),
b=!0);Camera.updateRay&&Grid.getCubeInRay(Camera.getMouseRay());if(Grid.redraw||b)useBackgroundTextures?Background.draw(a):a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Grid.draw(a)},drawWithFBO:function(a,b){this.gameover?a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT):a.clear(a.COLOR_BUFFER_BIT);a.bindFBO(b);Grid.draw(a);a.drawFBO(b,Element.shader);a.passTexture(Element.texture,Element.shader.textureUniform);Element.updateMatrix(a)},reset:function(){this.gameover=!1;Camera.reset();TWEEN.onComplete(null)},
start:function(a){this.saveStats(Grid.playTime,!1);a?Grid.init():Grid.start();this.reset()},restart:function(){this.saveStats(Grid.playTime,!1);Grid.restart();this.reset()},over:function(a,b){var c=this;this.saveStats(Grid.playTime,a);this.gameover=!0;Grid.showMines(a,b);if(Settings.animations&&TWEEN.getAll().length)TWEEN.onComplete(function(){c.showEndScreen(a)});else this.showEndScreen(a)},showEndScreen:function(a){a?Menu.fsm.win():Menu.fsm.lose()},saveStats:function(a,b){!this.gameover&&Grid.started&&
(Stats.updateStats(a,b),Menu.updateStats())}};var canvas,width,height,gl,stats;function init(a){setViewport();a.clearColor.apply(a,hexToRGB(backgroundColor));a.enable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.lineWidth(2);a.enableAlpha();a.initQuad();Stats.init();Stats.loadSettings();Settings.init();EventHandler.init();Game.init(a);Menu.init();showWelcomeScreen||!Stats.read("hideWelcomeScreen")?Menu.fsm.changeState("welcome"):Menu.fsm.play()}
function setViewport(){canvas.width=width=canvas.clientWidth;canvas.height=height=canvas.clientHeight;gl.viewport(0,0,canvas.width,canvas.height)}function draw(){requestAnimationFrame(draw,canvas);Game.draw(gl);stats.update()}
function start(){canvas=document.createElement("canvas");gl=null;System.support.webgl&&(gl=canvas.getContext("experimental-webgl",{antialias:useAntialias}));if(gl){var a=document.querySelector("#container");a.appendChild(canvas);canvas.style.backgroundColor="black";canvas.style.width="100%";canvas.style.height="100%";"Chrome"===System.browser&&"Windows"===System.os||$("body").addClass("useFont");stats=new StatsJS;stats.hide();stats.domElement.style.position="absolute";stats.domElement.style.left=
"0px";stats.domElement.style.top="0px";a.appendChild(stats.domElement);applyURLParams();extend(gl,WebGLUtilities);init(gl);draw()}else $("#error").show()};